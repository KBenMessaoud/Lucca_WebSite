"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.migrateFile = void 0;
function migrateFile(path, entry, tree, updater) {
    if (!entry) {
        return;
    }
    const content = entry.content.toString();
    try {
        const newContent = updater(content);
        if (content !== newContent) {
            tree.overwrite(path, newContent);
        }
    }
    catch (error) {
        throw error instanceof Error ? new Error(`Failed to migrate ${path}:\n${error.message}`) : error;
    }
}
exports.migrateFile = migrateFile;
