//FIXME
/* eslint-disable @angular-eslint/no-output-on-prefix */
/* eslint-disable @angular-eslint/no-output-native */
import { A11yModule } from '@angular/cdk/a11y';
import { CommonModule } from '@angular/common';
import { ChangeDetectionStrategy, Component, EventEmitter, forwardRef, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { ELuDateGranularity } from '@lucca-front/ng/core';
import { ALuPickerPanel } from '@lucca-front/ng/picker';
import { luTransformPopover } from '@lucca-front/ng/popover';
import { LuCalendarInputComponent } from '../calendar';
import { LuDateInputDirective } from '../input';
import * as i0 from "@angular/core";
import * as i1 from "@lucca-front/ng/core";
import * as i2 from "@angular/forms";
import * as i3 from "@angular/common";
import * as i4 from "@angular/cdk/a11y";
class LuDatePickerComponent extends ALuPickerPanel {
    set vcTemplateRef(tr) {
        this.templateRef = tr;
    }
    constructor(_adapter) {
        super();
        this._adapter = _adapter;
        this.granularity = ELuDateGranularity.day;
        this.startOn = this._adapter.forgeToday();
        this.close = new EventEmitter();
        this.open = new EventEmitter();
        this.hovered = new EventEmitter();
        this.onSelectValue = new EventEmitter();
    }
    _emitOpenEvent() {
        this.open.emit();
    }
    _emitCloseEvent() {
        this.close.emit();
    }
    _emitHoveredEvent(h) {
        this.hovered.emit(h);
    }
    _emitSelectValue(val) {
        this.onSelectValue.emit(val);
    }
    setValue(value) {
        this._value = value;
    }
    _onCalendar(val) {
        this._value = val;
        this._emitSelectValue(val);
        // if (!this.multiple) {
        this._emitCloseEvent();
        // }
    }
    _onInput(val) {
        this._value = val;
        this._emitSelectValue(val);
    }
    _onEnter() {
        this._emitCloseEvent();
    }
    _handleKeydown(event) {
        switch (event.key) {
            case 'Escape':
                this._emitCloseEvent();
                event.preventDefault();
                event.stopPropagation();
                break;
            case 'Tab':
                this._emitCloseEvent();
                break;
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.3", ngImport: i0, type: LuDatePickerComponent, deps: [{ token: i1.ALuDateAdapter }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.3", type: LuDatePickerComponent, isStandalone: true, selector: "lu-date-picker", inputs: { min: "min", max: "max", granularity: "granularity", startOn: "startOn" }, outputs: { close: "close", open: "open", hovered: "hovered", onSelectValue: "onSelectValue" }, providers: [
            {
                provide: ALuPickerPanel,
                useExisting: forwardRef(() => LuDatePickerComponent),
            },
        ], viewQueries: [{ propertyName: "vcTemplateRef", first: true, predicate: TemplateRef, descendants: true, static: true }], exportAs: ["LuDatePicker"], usesInheritance: true, ngImport: i0, template: "<ng-template>\n\t<div\n\t\tclass=\"lu-picker-panel lu-date-picker-panel\"\n\t\trole=\"dialog\"\n\t\t[ngClass]=\"panelClassesMap\"\n\t\t(click)=\"onClick()\"\n\t\t(mouseover)=\"onMouseOver()\"\n\t\t(mouseleave)=\"onMouseLeave()\"\n\t\t(mousedown)=\"onMouseDown()\"\n\t>\n\t\t<div class=\"lu-picker-content\" [ngClass]=\"contentClassesMap\" cdkTrapFocus=\"false\" cdkTrapFocusAutoCapture=\"true\">\n\t\t\t<label class=\"textfield lu-picker-textfield\">\n\t\t\t\t<input\n\t\t\t\t\tluDateInput\n\t\t\t\t\tclass=\"textfield-input\"\n\t\t\t\t\t[ngModel]=\"_value\"\n\t\t\t\t\t(ngModelChange)=\"_onInput($event)\"\n\t\t\t\t\t(keydown.enter)=\"_onEnter()\"\n\t\t\t\t\t[min]=\"min\"\n\t\t\t\t\t[max]=\"max\"\n\t\t\t\t\t[granularity]=\"granularity\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<lu-calendar\n\t\t\t\t[ngModel]=\"_value\"\n\t\t\t\t(ngModelChange)=\"_onCalendar($event)\"\n\t\t\t\t[min]=\"min\"\n\t\t\t\t[max]=\"max\"\n\t\t\t\t[granularity]=\"granularity\"\n\t\t\t\t[startOn]=\"startOn\"\n\t\t\t></lu-calendar>\n\t\t</div>\n\t</div>\n</ng-template>\n", dependencies: [{ kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i2.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i2.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "component", type: LuCalendarInputComponent, selector: "lu-calendar", inputs: ["min", "max", "granularity", "startOn"] }, { kind: "directive", type: LuDateInputDirective, selector: "input[luDateInput]", inputs: ["min", "max", "granularity", "placeholder"] }, { kind: "ngmodule", type: A11yModule }, { kind: "directive", type: i4.CdkTrapFocus, selector: "[cdkTrapFocus]", inputs: ["cdkTrapFocus", "cdkTrapFocusAutoCapture"], exportAs: ["cdkTrapFocus"] }], animations: [luTransformPopover], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
export { LuDatePickerComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.3", ngImport: i0, type: LuDatePickerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lu-date-picker', changeDetection: ChangeDetectionStrategy.OnPush, exportAs: 'LuDatePicker', animations: [luTransformPopover], standalone: true, imports: [FormsModule, CommonModule, LuCalendarInputComponent, LuDateInputDirective, A11yModule], providers: [
                        {
                            provide: ALuPickerPanel,
                            useExisting: forwardRef(() => LuDatePickerComponent),
                        },
                    ], template: "<ng-template>\n\t<div\n\t\tclass=\"lu-picker-panel lu-date-picker-panel\"\n\t\trole=\"dialog\"\n\t\t[ngClass]=\"panelClassesMap\"\n\t\t(click)=\"onClick()\"\n\t\t(mouseover)=\"onMouseOver()\"\n\t\t(mouseleave)=\"onMouseLeave()\"\n\t\t(mousedown)=\"onMouseDown()\"\n\t>\n\t\t<div class=\"lu-picker-content\" [ngClass]=\"contentClassesMap\" cdkTrapFocus=\"false\" cdkTrapFocusAutoCapture=\"true\">\n\t\t\t<label class=\"textfield lu-picker-textfield\">\n\t\t\t\t<input\n\t\t\t\t\tluDateInput\n\t\t\t\t\tclass=\"textfield-input\"\n\t\t\t\t\t[ngModel]=\"_value\"\n\t\t\t\t\t(ngModelChange)=\"_onInput($event)\"\n\t\t\t\t\t(keydown.enter)=\"_onEnter()\"\n\t\t\t\t\t[min]=\"min\"\n\t\t\t\t\t[max]=\"max\"\n\t\t\t\t\t[granularity]=\"granularity\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<lu-calendar\n\t\t\t\t[ngModel]=\"_value\"\n\t\t\t\t(ngModelChange)=\"_onCalendar($event)\"\n\t\t\t\t[min]=\"min\"\n\t\t\t\t[max]=\"max\"\n\t\t\t\t[granularity]=\"granularity\"\n\t\t\t\t[startOn]=\"startOn\"\n\t\t\t></lu-calendar>\n\t\t</div>\n\t</div>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.ALuDateAdapter }]; }, propDecorators: { min: [{
                type: Input
            }], max: [{
                type: Input
            }], granularity: [{
                type: Input
            }], startOn: [{
                type: Input
            }], close: [{
                type: Output
            }], open: [{
                type: Output
            }], hovered: [{
                type: Output
            }], onSelectValue: [{
                type: Output
            }], vcTemplateRef: [{
                type: ViewChild,
                args: [TemplateRef, { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1waWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvbmcvZGF0ZS9waWNrZXIvZGF0ZS1waWNrZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvbmcvZGF0ZS9waWNrZXIvZGF0ZS1waWNrZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTztBQUNQLHdEQUF3RDtBQUN4RCxxREFBcUQ7QUFDckQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3BJLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQWtCLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3hELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQzdELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN2RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxVQUFVLENBQUM7Ozs7OztBQUVoRCxNQWVhLHFCQUFnQyxTQUFRLGNBQWlCO0lBYXJFLElBQ0ksYUFBYSxDQUFDLEVBQXdCO1FBQ3pDLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxZQUFvQixRQUEyQjtRQUM5QyxLQUFLLEVBQUUsQ0FBQztRQURXLGFBQVEsR0FBUixRQUFRLENBQW1C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TUFBTTtnQkFDWSxJQUFJO3NCQUF0QixNQUFNO2dCQUNZLE9BQU87c0JBQXpCLE1BQU07Z0JBQ1ksYUFBYTtzQkFBL0IsTUFBTTtnQkFHSCxhQUFhO3NCQURoQixTQUFTO3VCQUFDLFdBQVcsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyIvL0ZJWE1FXG4vKiBlc2xpbnQtZGlzYWJsZSBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LW9uLXByZWZpeCAqL1xuLyogZXNsaW50LWRpc2FibGUgQGFuZ3VsYXItZXNsaW50L25vLW91dHB1dC1uYXRpdmUgKi9cbmltcG9ydCB7IEExMXlNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jZGsvYTExeSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBmb3J3YXJkUmVmLCBJbnB1dCwgT3V0cHV0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEFMdURhdGVBZGFwdGVyLCBFTHVEYXRlR3JhbnVsYXJpdHkgfSBmcm9tICdAbHVjY2EtZnJvbnQvbmcvY29yZSc7XG5pbXBvcnQgeyBBTHVQaWNrZXJQYW5lbCB9IGZyb20gJ0BsdWNjYS1mcm9udC9uZy9waWNrZXInO1xuaW1wb3J0IHsgbHVUcmFuc2Zvcm1Qb3BvdmVyIH0gZnJvbSAnQGx1Y2NhLWZyb250L25nL3BvcG92ZXInO1xuaW1wb3J0IHsgTHVDYWxlbmRhcklucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4vY2FsZW5kYXInO1xuaW1wb3J0IHsgTHVEYXRlSW5wdXREaXJlY3RpdmUgfSBmcm9tICcuLi9pbnB1dCc7XG5cbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogJ2x1LWRhdGUtcGlja2VyJyxcblx0dGVtcGxhdGVVcmw6ICcuL2RhdGUtcGlja2VyLmNvbXBvbmVudC5odG1sJyxcblx0Y2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG5cdGV4cG9ydEFzOiAnTHVEYXRlUGlja2VyJyxcblx0YW5pbWF0aW9uczogW2x1VHJhbnNmb3JtUG9wb3Zlcl0sXG5cdHN0YW5kYWxvbmU6IHRydWUsXG5cdGltcG9ydHM6IFtGb3Jtc01vZHVsZSwgQ29tbW9uTW9kdWxlLCBMdUNhbGVuZGFySW5wdXRDb21wb25lbnQsIEx1RGF0ZUlucHV0RGlyZWN0aXZlLCBBMTF5TW9kdWxlXSxcblx0cHJvdmlkZXJzOiBbXG5cdFx0e1xuXHRcdFx0cHJvdmlkZTogQUx1UGlja2VyUGFuZWwsXG5cdFx0XHR1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBMdURhdGVQaWNrZXJDb21wb25lbnQpLFxuXHRcdH0sXG5cdF0sXG59KVxuZXhwb3J0IGNsYXNzIEx1RGF0ZVBpY2tlckNvbXBvbmVudDxEID0gRGF0ZT4gZXh0ZW5kcyBBTHVQaWNrZXJQYW5lbDxEPiB7XG5cdF92YWx1ZTogRDtcblxuXHRASW5wdXQoKSBtaW4/OiBEO1xuXHRASW5wdXQoKSBtYXg/OiBEO1xuXHRASW5wdXQoKSBncmFudWxhcml0eTogRUx1RGF0ZUdyYW51bGFyaXR5ID0gRUx1RGF0ZUdyYW51bGFyaXR5LmRheTtcblx0QElucHV0KCkgc3RhcnRPbjogRCA9IHRoaXMuX2FkYXB0ZXIuZm9yZ2VUb2RheSgpO1xuXG5cdEBPdXRwdXQoKSBvdmVycmlkZSBjbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblx0QE91dHB1dCgpIG92ZXJyaWRlIG9wZW4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cdEBPdXRwdXQoKSBvdmVycmlkZSBob3ZlcmVkID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXHRAT3V0cHV0KCkgb3ZlcnJpZGUgb25TZWxlY3RWYWx1ZSA9IG5ldyBFdmVudEVtaXR0ZXI8RD4oKTtcblxuXHRAVmlld0NoaWxkKFRlbXBsYXRlUmVmLCB7IHN0YXRpYzogdHJ1ZSB9KVxuXHRzZXQgdmNUZW1wbGF0ZVJlZih0cjogVGVtcGxhdGVSZWY8dW5rbm93bj4pIHtcblx0XHR0aGlzLnRlbXBsYXRlUmVmID0gdHI7XG5cdH1cblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIF9hZGFwdGVyOiBBTHVEYXRlQWRhcHRlcjxEPikge1xuXHRcdHN1cGVyKCk7XG5cdH1cblx0X2VtaXRPcGVuRXZlbnQoKTogdm9pZCB7XG5cdFx0dGhpcy5vcGVuLmVtaXQoKTtcblx0fVxuXHRfZW1pdENsb3NlRXZlbnQoKTogdm9pZCB7XG5cdFx0dGhpcy5jbG9zZS5lbWl0KCk7XG5cdH1cblx0X2VtaXRIb3ZlcmVkRXZlbnQoaDogYm9vbGVhbik6IHZvaWQge1xuXHRcdHRoaXMuaG92ZXJlZC5lbWl0KGgpO1xuXHR9XG5cdF9lbWl0U2VsZWN0VmFsdWUodmFsOiBEKSB7XG5cdFx0dGhpcy5vblNlbGVjdFZhbHVlLmVtaXQodmFsKTtcblx0fVxuXHRzZXRWYWx1ZSh2YWx1ZTogRCkge1xuXHRcdHRoaXMuX3ZhbHVlID0gdmFsdWU7XG5cdH1cblx0X29uQ2FsZW5kYXIodmFsOiBEKSB7XG5cdFx0dGhpcy5fdmFsdWUgPSB2YWw7XG5cdFx0dGhpcy5fZW1pdFNlbGVjdFZhbHVlKHZhbCk7XG5cdFx0Ly8gaWYgKCF0aGlzLm11bHRpcGxlKSB7XG5cdFx0dGhpcy5fZW1pdENsb3NlRXZlbnQoKTtcblx0XHQvLyB9XG5cdH1cblx0X29uSW5wdXQodmFsOiBEKSB7XG5cdFx0dGhpcy5fdmFsdWUgPSB2YWw7XG5cdFx0dGhpcy5fZW1pdFNlbGVjdFZhbHVlKHZhbCk7XG5cdH1cblx0X29uRW50ZXIoKSB7XG5cdFx0dGhpcy5fZW1pdENsb3NlRXZlbnQoKTtcblx0fVxuXHRvdmVycmlkZSBfaGFuZGxlS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuXHRcdHN3aXRjaCAoZXZlbnQua2V5KSB7XG5cdFx0XHRjYXNlICdFc2NhcGUnOlxuXHRcdFx0XHR0aGlzLl9lbWl0Q2xvc2VFdmVudCgpO1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdUYWInOlxuXHRcdFx0XHR0aGlzLl9lbWl0Q2xvc2VFdmVudCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblx0Ly8gbmdBZnRlclZpZXdJbml0KCkge1xuXHQvLyBcdHRoaXMuX2RhdGVJbnB1dC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG5cdC8vIH1cbn1cbiIsIjxuZy10ZW1wbGF0ZT5cblx0PGRpdlxuXHRcdGNsYXNzPVwibHUtcGlja2VyLXBhbmVsIGx1LWRhdGUtcGlja2VyLXBhbmVsXCJcblx0XHRyb2xlPVwiZGlhbG9nXCJcblx0XHRbbmdDbGFzc109XCJwYW5lbENsYXNzZXNNYXBcIlxuXHRcdChjbGljayk9XCJvbkNsaWNrKClcIlxuXHRcdChtb3VzZW92ZXIpPVwib25Nb3VzZU92ZXIoKVwiXG5cdFx0KG1vdXNlbGVhdmUpPVwib25Nb3VzZUxlYXZlKClcIlxuXHRcdChtb3VzZWRvd24pPVwib25Nb3VzZURvd24oKVwiXG5cdD5cblx0XHQ8ZGl2IGNsYXNzPVwibHUtcGlja2VyLWNvbnRlbnRcIiBbbmdDbGFzc109XCJjb250ZW50Q2xhc3Nlc01hcFwiIGNka1RyYXBGb2N1cz1cImZhbHNlXCIgY2RrVHJhcEZvY3VzQXV0b0NhcHR1cmU9XCJ0cnVlXCI+XG5cdFx0XHQ8bGFiZWwgY2xhc3M9XCJ0ZXh0ZmllbGQgbHUtcGlja2VyLXRleHRmaWVsZFwiPlxuXHRcdFx0XHQ8aW5wdXRcblx0XHRcdFx0XHRsdURhdGVJbnB1dFxuXHRcdFx0XHRcdGNsYXNzPVwidGV4dGZpZWxkLWlucHV0XCJcblx0XHRcdFx0XHRbbmdNb2RlbF09XCJfdmFsdWVcIlxuXHRcdFx0XHRcdChuZ01vZGVsQ2hhbmdlKT1cIl9vbklucHV0KCRldmVudClcIlxuXHRcdFx0XHRcdChrZXlkb3duLmVudGVyKT1cIl9vbkVudGVyKClcIlxuXHRcdFx0XHRcdFttaW5dPVwibWluXCJcblx0XHRcdFx0XHRbbWF4XT1cIm1heFwiXG5cdFx0XHRcdFx0W2dyYW51bGFyaXR5XT1cImdyYW51bGFyaXR5XCJcblx0XHRcdFx0Lz5cblx0XHRcdDwvbGFiZWw+XG5cdFx0XHQ8bHUtY2FsZW5kYXJcblx0XHRcdFx0W25nTW9kZWxdPVwiX3ZhbHVlXCJcblx0XHRcdFx0KG5nTW9kZWxDaGFuZ2UpPVwiX29uQ2FsZW5kYXIoJGV2ZW50KVwiXG5cdFx0XHRcdFttaW5dPVwibWluXCJcblx0XHRcdFx0W21heF09XCJtYXhcIlxuXHRcdFx0XHRbZ3JhbnVsYXJpdHldPVwiZ3JhbnVsYXJpdHlcIlxuXHRcdFx0XHRbc3RhcnRPbl09XCJzdGFydE9uXCJcblx0XHRcdD48L2x1LWNhbGVuZGFyPlxuXHRcdDwvZGl2PlxuXHQ8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=