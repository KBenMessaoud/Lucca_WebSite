import { booleanAttribute, Component, ContentChild, HostBinding, inject, Input } from '@angular/core';
import { NgIf, NgSwitch, NgSwitchCase, NgTemplateOutlet } from '@angular/common';
import { InputDirective } from './input.directive';
import { BehaviorSubject } from 'rxjs';
import { InlineMessageComponent } from '@lucca-front/ng/inline-message';
import { LuTooltipModule } from '@lucca-front/ng/tooltip';
import { NgClazz } from '@lucca-front/ng/core';
import { ReactiveFormsModule } from '@angular/forms';
import { IconComponent } from '@lucca-front/ng/icon';
import * as i0 from "@angular/core";
import * as i1 from "@lucca-front/ng/core";
import * as i2 from "@lucca-front/ng/tooltip";
let nextId = 0;
class FormFieldComponent {
    constructor() {
        this.#ngClass = inject(NgClazz);
        this.clazz = 'form-field';
        this.hiddenLabel = false;
        this.required = false;
        this.invalid = false;
        this.layout = 'default';
        this.ready$ = new BehaviorSubject(false);
        this.#ariaLabelledBy = [];
    }
    #ngClass;
    get ready() {
        return this.ready$.value;
    }
    #ariaLabelledBy;
    addLabelledBy(id, prepend = false) {
        if (prepend) {
            this.#ariaLabelledBy = [id, ...this.#ariaLabelledBy];
        }
        else {
            this.#ariaLabelledBy = [...this.#ariaLabelledBy, id];
        }
        if (this.#nativeInputRef) {
            this.#nativeInputRef.setAttribute('aria-labelledby', this.#ariaLabelledBy.join(' '));
        }
    }
    removeLabelledBy(id) {
        this.#ariaLabelledBy = this.#ariaLabelledBy.filter((labelledBy) => labelledBy === id);
    }
    #nativeInputRef;
    ngOnChanges() {
        this.#ngClass.ngClass = {
            [`mod-${this.size}`]: true,
        };
        if (this.#nativeInputRef) {
            this.updateAria();
        }
    }
    ngAfterViewInit() {
        if (!this.input) {
            throw new Error('Missing input for form field, make sure to set `luInput` to your input inside lu-form-field');
        }
        this.#nativeInputRef = this.input.host.nativeElement;
        this.id = `${this.#nativeInputRef.tagName.toLowerCase()}-${++nextId}`;
        this.#nativeInputRef.id = this.id;
        this.updateAria();
        this.ready$.next(true);
    }
    updateAria() {
        this.#nativeInputRef.ariaInvalid = this.invalid.toString();
        this.#nativeInputRef.ariaRequired = this.required.toString();
        this.#nativeInputRef.setAttribute('aria-describedby', `${this.id}-message`);
        this.addLabelledBy(`${this.id}-label`);
    }
    ngOnDestroy() {
        this.ready$.complete();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.3", ngImport: i0, type: FormFieldComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.3", type: FormFieldComponent, isStandalone: true, selector: "lu-form-field", inputs: { label: "label", hiddenLabel: ["hiddenLabel", "hiddenLabel", booleanAttribute], tooltip: "tooltip", required: ["required", "required", booleanAttribute], invalid: ["invalid", "invalid", booleanAttribute], inlineMessage: "inlineMessage", inlineMessageState: "inlineMessageState", size: "size", layout: "layout" }, host: { properties: { "class": "this.clazz" } }, queries: [{ propertyName: "input", first: true, predicate: InputDirective, descendants: true }], usesOnChanges: true, hostDirectives: [{ directive: i1.NgClazz }], ngImport: i0, template: "<label class=\"formLabel\" id=\"{{id}}-label\" for=\"{{id}}\" [class.u-mask]=\"hiddenLabel\" attr.aria-hidden=\"{{hiddenLabel}}\">\n\t{{label}}<sup class=\"formLabel-required\" aria-hidden=\"true\" *ngIf=\"required\">*</sup>\n\t<lu-icon icon=\"helpOutline\" alt=\"\" *ngIf=\"tooltip\" [luTooltip]=\"tooltip\"></lu-icon>\n</label>\n<ng-container [ngSwitch]=\"layout\">\n\t<div class=\"textField\" *ngSwitchCase=\"'default'\">\n\t\t<ng-container *ngTemplateOutlet=\"contentTpl\"></ng-container>\n\t</div>\n\t<ng-container *ngSwitchCase=\"'checkbox'\">\n\t\t<ng-container *ngTemplateOutlet=\"contentTpl\"></ng-container>\n\t</ng-container>\n</ng-container>\n<lu-inline-message id=\"{{id}}-message\" *ngIf=\"inlineMessage\" [label]=\"inlineMessage\" [state]=\"inlineMessageState\"></lu-inline-message>\n<!--We have to do this because multiple ng-content in the same template leads to weird behaviors-->\n<ng-template #contentTpl>\n\t<ng-content></ng-content>\n</ng-template>\n", styles: [".textField{--component-textField-lineHeight: var(--size-M-lightHeight);--component-textField-fontSize: var(--size-M-fontSize);--component-textField-placeholder: var(--palettes-grey-400);--component-textField-background: var(--colors-white-color);--component-textField-border: var(--palettes-grey-300);--component-textField-color: var(--palettes-grey-800);--component-textField-prefix-color: var(--palettes-grey-600);--component-textField-padding: var(--spacings-XS);--component-textField-affix-padding: var(--component-textField-padding);display:flex;align-items:stretch;border-radius:var(--commons-borderRadius-M);background-color:var(--component-textField-background)}.textField:focus-within:not(:has(.textField-input-affix-clear:focus)){outline:2px solid var(--palettes-primary-700);outline-offset:3px}.textField-input{display:flex;align-items:center;width:100%;box-shadow:0 0 0 1px var(--component-textField-border);border-radius:var(--commons-borderRadius-M);background-color:var(--component-textField-background);position:relative}.textField-input:hover{--component-textField-border: var(--palettes-grey-400)}.textField-input:has(.textField-input-affix-icon){--component-textField-affix-padding: 2.5rem}.textField-input:has(.textField-input-affix-clear){--component-textField-affix-padding: 2rem}.textField-input:has(.textField-input-affix-clear):has(.textField-input-affix-icon){--component-textField-affix-padding: 4rem}.textField-input-value{border:0;outline:0;line-height:var(--component-textField-lineHeight);font-size:var(--component-textField-fontSize);width:100%;padding:var(--component-textField-padding) var(--component-textField-affix-padding) var(--component-textField-padding) var(--component-textField-padding);background-color:transparent;color:var(--component-textField-color)}.textField-input-value::placeholder{color:var(--component-textField-placeholder)}.textField-input-affix{display:inline-flex;align-items:center;gap:var(--spacings-XS);position:absolute;right:var(--spacings-XS);pointer-events:none}.textField-input-affix-icon{--icon-size: 1.5rem;color:var(--palettes-grey-600);pointer-events:none}.textField-input-affix-clear{pointer-events:auto}.textField-prefix{display:flex;padding:0 var(--component-textField-padding);align-items:center;color:var(--component-textField-prefix-color);line-height:var(--component-textField-lineHeight);font-size:var(--component-textField-fontSize);box-shadow:0 0 0 1px var(--component-textField-border);border-top-left-radius:var(--commons-borderRadius-M);border-bottom-left-radius:var(--commons-borderRadius-M)}.textField-prefix~.textField-input{border-top-left-radius:0;border-bottom-left-radius:0}.textField-suffix{display:flex;padding:0 var(--component-textField-padding);align-items:center;color:var(--component-textField-prefix-color);line-height:var(--component-textField-lineHeight);font-size:var(--component-textField-fontSize);box-shadow:0 0 0 1px var(--component-textField-border);border-top-right-radius:var(--commons-borderRadius-M);border-bottom-right-radius:var(--commons-borderRadius-M);order:1}.textField-suffix~.textField-input{border-top-right-radius:0;border-bottom-right-radius:0}.textField.mod-S{--component-textField-fontSize: var(--sizes-S-fontSize);--component-textField-lineHeight: var(--sizes-S-lineHeight);--component-textField-padding: .375rem}.textField.mod-S .textField-input-affix-clear{--components-clear-size: .75rem;--icon-size: .75rem}.textField.mod-S .textField-input-affix-icon{--icon-size: 1.25rem}.textField.mod-XS{--component-textField-fontSize: var(--sizes-XS-fontSize);--component-textField-lineHeight: var(--sizes-XS-lineHeight);--component-textField-padding: var(--spacings-XXS)}.textField.mod-XS .textField-prefix,.textField.mod-XS .textField-suffix,.textField.mod-XS .textField-input-affix-icon{--icon-size: 1rem}.textField.mod-XS .textField-input-affix-clear{--components-clear-size: .75rem;--icon-size: .75rem}.textField.is-invalid,.textField:has(.textField-input-value[aria-invalid=true]){--component-textField-border: var(--palettes-error-400);--component-textField-background: var(--palettes-error-50);--component-textField-placeholder: var(--palettes-error-400)}.textField.is-invalid .textField-input:hover,.textField:has(.textField-input-value[aria-invalid=true]) .textField-input:hover{--component-textField-border: var(--palettes-error-600)}.textField.is-disabled,.textField:has(.textField-input-value:disabled){--component-textField-border: var(--palettes-grey-300);--component-textField-background: var(--palettes-grey-100);--component-textField-color: var(--palettes-grey-600)}\n"], dependencies: [{ kind: "directive", type: NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: InlineMessageComponent, selector: "lu-inline-message", inputs: ["label", "state", "size"] }, { kind: "ngmodule", type: LuTooltipModule }, { kind: "directive", type: i2.LuTooltipTriggerDirective, selector: "[luTooltip]", inputs: ["luTooltip", "luTooltipEnterDelay", "luTooltipLeaveDelay", "luTooltipDisabled", "luTooltipPosition", "luTooltipWhenEllipsis"], outputs: ["luTooltipOnOpen", "luTooltipOnClose"] }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "component", type: IconComponent, selector: "lu-icon", inputs: ["icon", "alt", "size", "color"] }] }); }
}
export { FormFieldComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.3", ngImport: i0, type: FormFieldComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lu-form-field', standalone: true, imports: [NgIf, NgSwitch, NgSwitchCase, NgTemplateOutlet, InlineMessageComponent, LuTooltipModule, ReactiveFormsModule, IconComponent], hostDirectives: [NgClazz], template: "<label class=\"formLabel\" id=\"{{id}}-label\" for=\"{{id}}\" [class.u-mask]=\"hiddenLabel\" attr.aria-hidden=\"{{hiddenLabel}}\">\n\t{{label}}<sup class=\"formLabel-required\" aria-hidden=\"true\" *ngIf=\"required\">*</sup>\n\t<lu-icon icon=\"helpOutline\" alt=\"\" *ngIf=\"tooltip\" [luTooltip]=\"tooltip\"></lu-icon>\n</label>\n<ng-container [ngSwitch]=\"layout\">\n\t<div class=\"textField\" *ngSwitchCase=\"'default'\">\n\t\t<ng-container *ngTemplateOutlet=\"contentTpl\"></ng-container>\n\t</div>\n\t<ng-container *ngSwitchCase=\"'checkbox'\">\n\t\t<ng-container *ngTemplateOutlet=\"contentTpl\"></ng-container>\n\t</ng-container>\n</ng-container>\n<lu-inline-message id=\"{{id}}-message\" *ngIf=\"inlineMessage\" [label]=\"inlineMessage\" [state]=\"inlineMessageState\"></lu-inline-message>\n<!--We have to do this because multiple ng-content in the same template leads to weird behaviors-->\n<ng-template #contentTpl>\n\t<ng-content></ng-content>\n</ng-template>\n", styles: [".textField{--component-textField-lineHeight: var(--size-M-lightHeight);--component-textField-fontSize: var(--size-M-fontSize);--component-textField-placeholder: var(--palettes-grey-400);--component-textField-background: var(--colors-white-color);--component-textField-border: var(--palettes-grey-300);--component-textField-color: var(--palettes-grey-800);--component-textField-prefix-color: var(--palettes-grey-600);--component-textField-padding: var(--spacings-XS);--component-textField-affix-padding: var(--component-textField-padding);display:flex;align-items:stretch;border-radius:var(--commons-borderRadius-M);background-color:var(--component-textField-background)}.textField:focus-within:not(:has(.textField-input-affix-clear:focus)){outline:2px solid var(--palettes-primary-700);outline-offset:3px}.textField-input{display:flex;align-items:center;width:100%;box-shadow:0 0 0 1px var(--component-textField-border);border-radius:var(--commons-borderRadius-M);background-color:var(--component-textField-background);position:relative}.textField-input:hover{--component-textField-border: var(--palettes-grey-400)}.textField-input:has(.textField-input-affix-icon){--component-textField-affix-padding: 2.5rem}.textField-input:has(.textField-input-affix-clear){--component-textField-affix-padding: 2rem}.textField-input:has(.textField-input-affix-clear):has(.textField-input-affix-icon){--component-textField-affix-padding: 4rem}.textField-input-value{border:0;outline:0;line-height:var(--component-textField-lineHeight);font-size:var(--component-textField-fontSize);width:100%;padding:var(--component-textField-padding) var(--component-textField-affix-padding) var(--component-textField-padding) var(--component-textField-padding);background-color:transparent;color:var(--component-textField-color)}.textField-input-value::placeholder{color:var(--component-textField-placeholder)}.textField-input-affix{display:inline-flex;align-items:center;gap:var(--spacings-XS);position:absolute;right:var(--spacings-XS);pointer-events:none}.textField-input-affix-icon{--icon-size: 1.5rem;color:var(--palettes-grey-600);pointer-events:none}.textField-input-affix-clear{pointer-events:auto}.textField-prefix{display:flex;padding:0 var(--component-textField-padding);align-items:center;color:var(--component-textField-prefix-color);line-height:var(--component-textField-lineHeight);font-size:var(--component-textField-fontSize);box-shadow:0 0 0 1px var(--component-textField-border);border-top-left-radius:var(--commons-borderRadius-M);border-bottom-left-radius:var(--commons-borderRadius-M)}.textField-prefix~.textField-input{border-top-left-radius:0;border-bottom-left-radius:0}.textField-suffix{display:flex;padding:0 var(--component-textField-padding);align-items:center;color:var(--component-textField-prefix-color);line-height:var(--component-textField-lineHeight);font-size:var(--component-textField-fontSize);box-shadow:0 0 0 1px var(--component-textField-border);border-top-right-radius:var(--commons-borderRadius-M);border-bottom-right-radius:var(--commons-borderRadius-M);order:1}.textField-suffix~.textField-input{border-top-right-radius:0;border-bottom-right-radius:0}.textField.mod-S{--component-textField-fontSize: var(--sizes-S-fontSize);--component-textField-lineHeight: var(--sizes-S-lineHeight);--component-textField-padding: .375rem}.textField.mod-S .textField-input-affix-clear{--components-clear-size: .75rem;--icon-size: .75rem}.textField.mod-S .textField-input-affix-icon{--icon-size: 1.25rem}.textField.mod-XS{--component-textField-fontSize: var(--sizes-XS-fontSize);--component-textField-lineHeight: var(--sizes-XS-lineHeight);--component-textField-padding: var(--spacings-XXS)}.textField.mod-XS .textField-prefix,.textField.mod-XS .textField-suffix,.textField.mod-XS .textField-input-affix-icon{--icon-size: 1rem}.textField.mod-XS .textField-input-affix-clear{--components-clear-size: .75rem;--icon-size: .75rem}.textField.is-invalid,.textField:has(.textField-input-value[aria-invalid=true]){--component-textField-border: var(--palettes-error-400);--component-textField-background: var(--palettes-error-50);--component-textField-placeholder: var(--palettes-error-400)}.textField.is-invalid .textField-input:hover,.textField:has(.textField-input-value[aria-invalid=true]) .textField-input:hover{--component-textField-border: var(--palettes-error-600)}.textField.is-disabled,.textField:has(.textField-input-value:disabled){--component-textField-border: var(--palettes-grey-300);--component-textField-background: var(--palettes-grey-100);--component-textField-color: var(--palettes-grey-600)}\n"] }]
        }], propDecorators: { clazz: [{
                type: HostBinding,
                args: ['class']
            }], label: [{
                type: Input,
                args: [{
                        required: true,
                    }]
            }], hiddenLabel: [{
                type: Input,
                args: [{
                        transform: booleanAttribute,
                    }]
            }], tooltip: [{
                type: Input
            }], required: [{
                type: Input,
                args: [{
                        transform: booleanAttribute,
                    }]
            }], invalid: [{
                type: Input,
                args: [{
                        transform: booleanAttribute,
                    }]
            }], inlineMessage: [{
                type: Input
            }], inlineMessageState: [{
                type: Input
            }], size: [{
                type: Input
            }], layout: [{
                type: Input
            }], input: [{
                type: ContentChild,
                args: [InputDirective]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1maWVsZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wYWNrYWdlcy9uZy9mb3JtLWZpZWxkL2Zvcm0tZmllbGQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vcGFja2FnZXMvbmcvZm9ybS1maWVsZC9mb3JtLWZpZWxkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBaUIsZ0JBQWdCLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBd0IsTUFBTSxlQUFlLENBQUM7QUFDM0ksT0FBTyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDakYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRW5ELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDdkMsT0FBTyxFQUFFLHNCQUFzQixFQUFzQixNQUFNLGdDQUFnQyxDQUFDO0FBRTVGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDL0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHNCQUFzQixDQUFDOzs7O0FBRXJELElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztBQUVmLE1BUWEsa0JBQWtCO0lBUi9CO1FBU0MsYUFBUSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUczQixVQUFLLEdBQUcsWUFBWSxDQUFDO1FBVXJCLGdCQUFXLEdBQUcsS0FBSyxDQUFDO1FBUXBCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFLakIsWUFBTyxHQUFHLEtBQUssQ0FBQztRQWVo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RUFBRSxZQUFZLHFGQUFFLGdCQUFnQixvSkFBRSxzQkFBc0IsaUdBQUUsZUFBZSw0U0FBRSxtQkFBbUIsK0JBQUUsYUFBYTs7U0FLekgsa0JBQWtCOzJGQUFsQixrQkFBa0I7a0JBUjlCLFNBQVM7K0JBQ0MsZUFBZSxjQUNiLElBQUksV0FDUCxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLHNCQUFzQixFQUFFLGVBQWUsRUFBRSxtQkFBbUIsRUFBRSxhQUFhLENBQUMsa0JBR3RILENBQUMsT0FBTyxDQUFDOzhCQU16QixLQUFLO3NCQURKLFdBQVc7dUJBQUMsT0FBTztnQkFNcEIsS0FBSztzQkFISixLQUFLO3VCQUFDO3dCQUNOLFFBQVEsRUFBRSxJQUFJO3FCQUNkO2dCQU1ELFdBQVc7c0JBSFYsS0FBSzt1QkFBQzt3QkFDTixTQUFTLEVBQUUsZ0JBQWdCO3FCQUMzQjtnQkFJRCxPQUFPO3NCQUROLEtBQUs7Z0JBTU4sUUFBUTtzQkFIUCxLQUFLO3VCQUFDO3dCQUNOLFNBQVMsRUFBRSxnQkFBZ0I7cUJBQzNCO2dCQU1ELE9BQU87c0JBSE4sS0FBSzt1QkFBQzt3QkFDTixTQUFTLEVBQUUsZ0JBQWdCO3FCQUMzQjtnQkFJRCxhQUFhO3NCQURaLEtBQUs7Z0JBT04sa0JBQWtCO3NCQURqQixLQUFLO2dCQUlOLElBQUk7c0JBREgsS0FBSztnQkFJTixNQUFNO3NCQURMLEtBQUs7Z0JBSU4sS0FBSztzQkFESixZQUFZO3VCQUFDLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZnRlclZpZXdJbml0LCBib29sZWFuQXR0cmlidXRlLCBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgSG9zdEJpbmRpbmcsIGluamVjdCwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOZ0lmLCBOZ1N3aXRjaCwgTmdTd2l0Y2hDYXNlLCBOZ1RlbXBsYXRlT3V0bGV0IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IElucHV0RGlyZWN0aXZlIH0gZnJvbSAnLi9pbnB1dC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRm9ybUZpZWxkU2l6ZSB9IGZyb20gJy4vZm9ybS1maWVsZC1zaXplJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSW5saW5lTWVzc2FnZUNvbXBvbmVudCwgSW5saW5lTWVzc2FnZVN0YXRlIH0gZnJvbSAnQGx1Y2NhLWZyb250L25nL2lubGluZS1tZXNzYWdlJztcbmltcG9ydCB7IFNhZmVIdG1sIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5pbXBvcnQgeyBMdVRvb2x0aXBNb2R1bGUgfSBmcm9tICdAbHVjY2EtZnJvbnQvbmcvdG9vbHRpcCc7XG5pbXBvcnQgeyBOZ0NsYXp6IH0gZnJvbSAnQGx1Y2NhLWZyb250L25nL2NvcmUnO1xuaW1wb3J0IHsgUmVhY3RpdmVGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEljb25Db21wb25lbnQgfSBmcm9tICdAbHVjY2EtZnJvbnQvbmcvaWNvbic7XG5cbmxldCBuZXh0SWQgPSAwO1xuXG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6ICdsdS1mb3JtLWZpZWxkJyxcblx0c3RhbmRhbG9uZTogdHJ1ZSxcblx0aW1wb3J0czogW05nSWYsIE5nU3dpdGNoLCBOZ1N3aXRjaENhc2UsIE5nVGVtcGxhdGVPdXRsZXQsIElubGluZU1lc3NhZ2VDb21wb25lbnQsIEx1VG9vbHRpcE1vZHVsZSwgUmVhY3RpdmVGb3Jtc01vZHVsZSwgSWNvbkNvbXBvbmVudF0sXG5cdHRlbXBsYXRlVXJsOiAnLi9mb3JtLWZpZWxkLmNvbXBvbmVudC5odG1sJyxcblx0c3R5bGVVcmxzOiBbJy4vZm9ybS1maWVsZC5jb21wb25lbnQuc2NzcyddLFxuXHRob3N0RGlyZWN0aXZlczogW05nQ2xhenpdLFxufSlcbmV4cG9ydCBjbGFzcyBGb3JtRmllbGRDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCB7XG5cdCNuZ0NsYXNzID0gaW5qZWN0KE5nQ2xhenopO1xuXG5cdEBIb3N0QmluZGluZygnY2xhc3MnKVxuXHRjbGF6eiA9ICdmb3JtLWZpZWxkJztcblxuXHRASW5wdXQoe1xuXHRcdHJlcXVpcmVkOiB0cnVlLFxuXHR9KVxuXHRsYWJlbDogc3RyaW5nO1xuXG5cdEBJbnB1dCh7XG5cdFx0dHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlLFxuXHR9KVxuXHRoaWRkZW5MYWJlbCA9IGZhbHNlO1xuXG5cdEBJbnB1dCgpXG5cdHRvb2x0aXA6IHN0cmluZyB8IFNhZmVIdG1sO1xuXG5cdEBJbnB1dCh7XG5cdFx0dHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlLFxuXHR9KVxuXHRyZXF1aXJlZCA9IGZhbHNlO1xuXG5cdEBJbnB1dCh7XG5cdFx0dHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlLFxuXHR9KVxuXHRpbnZhbGlkID0gZmFsc2U7XG5cblx0QElucHV0KClcblx0aW5saW5lTWVzc2FnZTogc3RyaW5nO1xuXG5cdC8qKlxuXHQgKiBTdGF0ZSBvZiB0aGUgaW5saW5lIG1lc3NhZ2UsIHdpbGwgYmUgaWdub3JlZCBpZiBmb3JtIHN0YXRlIGlzIGludmFsaWRcblx0ICovXG5cdEBJbnB1dCgpXG5cdGlubGluZU1lc3NhZ2VTdGF0ZTogSW5saW5lTWVzc2FnZVN0YXRlO1xuXG5cdEBJbnB1dCgpXG5cdHNpemU6IEZvcm1GaWVsZFNpemU7XG5cblx0QElucHV0KClcblx0bGF5b3V0OiAnZGVmYXVsdCcgfCAnY2hlY2tib3gnID0gJ2RlZmF1bHQnO1xuXG5cdEBDb250ZW50Q2hpbGQoSW5wdXREaXJlY3RpdmUpXG5cdGlucHV0OiBJbnB1dERpcmVjdGl2ZTtcblxuXHRpZDogc3RyaW5nO1xuXG5cdHJlYWR5JCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xuXG5cdHB1YmxpYyBnZXQgcmVhZHkoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMucmVhZHkkLnZhbHVlO1xuXHR9XG5cblx0I2FyaWFMYWJlbGxlZEJ5OiBzdHJpbmdbXSA9IFtdO1xuXG5cdGFkZExhYmVsbGVkQnkoaWQ6IHN0cmluZywgcHJlcGVuZCA9IGZhbHNlKTogdm9pZCB7XG5cdFx0aWYgKHByZXBlbmQpIHtcblx0XHRcdHRoaXMuI2FyaWFMYWJlbGxlZEJ5ID0gW2lkLCAuLi50aGlzLiNhcmlhTGFiZWxsZWRCeV07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuI2FyaWFMYWJlbGxlZEJ5ID0gWy4uLnRoaXMuI2FyaWFMYWJlbGxlZEJ5LCBpZF07XG5cdFx0fVxuXHRcdGlmICh0aGlzLiNuYXRpdmVJbnB1dFJlZikge1xuXHRcdFx0dGhpcy4jbmF0aXZlSW5wdXRSZWYuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsbGVkYnknLCB0aGlzLiNhcmlhTGFiZWxsZWRCeS5qb2luKCcgJykpO1xuXHRcdH1cblx0fVxuXG5cdHJlbW92ZUxhYmVsbGVkQnkoaWQ6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuI2FyaWFMYWJlbGxlZEJ5ID0gdGhpcy4jYXJpYUxhYmVsbGVkQnkuZmlsdGVyKChsYWJlbGxlZEJ5KSA9PiBsYWJlbGxlZEJ5ID09PSBpZCk7XG5cdH1cblxuXHQjbmF0aXZlSW5wdXRSZWY6IEhUTUxFbGVtZW50O1xuXG5cdG5nT25DaGFuZ2VzKCk6IHZvaWQge1xuXHRcdHRoaXMuI25nQ2xhc3MubmdDbGFzcyA9IHtcblx0XHRcdFtgbW9kLSR7dGhpcy5zaXplfWBdOiB0cnVlLFxuXHRcdH07XG5cdFx0aWYgKHRoaXMuI25hdGl2ZUlucHV0UmVmKSB7XG5cdFx0XHR0aGlzLnVwZGF0ZUFyaWEoKTtcblx0XHR9XG5cdH1cblxuXHRuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmlucHV0KSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgaW5wdXQgZm9yIGZvcm0gZmllbGQsIG1ha2Ugc3VyZSB0byBzZXQgYGx1SW5wdXRgIHRvIHlvdXIgaW5wdXQgaW5zaWRlIGx1LWZvcm0tZmllbGQnKTtcblx0XHR9XG5cdFx0dGhpcy4jbmF0aXZlSW5wdXRSZWYgPSB0aGlzLmlucHV0Lmhvc3QubmF0aXZlRWxlbWVudDtcblx0XHR0aGlzLmlkID0gYCR7dGhpcy4jbmF0aXZlSW5wdXRSZWYudGFnTmFtZS50b0xvd2VyQ2FzZSgpfS0keysrbmV4dElkfWA7XG5cdFx0dGhpcy4jbmF0aXZlSW5wdXRSZWYuaWQgPSB0aGlzLmlkO1xuXHRcdHRoaXMudXBkYXRlQXJpYSgpO1xuXHRcdHRoaXMucmVhZHkkLm5leHQodHJ1ZSk7XG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZUFyaWEoKTogdm9pZCB7XG5cdFx0dGhpcy4jbmF0aXZlSW5wdXRSZWYuYXJpYUludmFsaWQgPSB0aGlzLmludmFsaWQudG9TdHJpbmcoKTtcblx0XHR0aGlzLiNuYXRpdmVJbnB1dFJlZi5hcmlhUmVxdWlyZWQgPSB0aGlzLnJlcXVpcmVkLnRvU3RyaW5nKCk7XG5cdFx0dGhpcy4jbmF0aXZlSW5wdXRSZWYuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgYCR7dGhpcy5pZH0tbWVzc2FnZWApO1xuXHRcdHRoaXMuYWRkTGFiZWxsZWRCeShgJHt0aGlzLmlkfS1sYWJlbGApO1xuXHR9XG5cblx0bmdPbkRlc3Ryb3koKTogdm9pZCB7XG5cdFx0dGhpcy5yZWFkeSQuY29tcGxldGUoKTtcblx0fVxufVxuIiwiPGxhYmVsIGNsYXNzPVwiZm9ybUxhYmVsXCIgaWQ9XCJ7e2lkfX0tbGFiZWxcIiBmb3I9XCJ7e2lkfX1cIiBbY2xhc3MudS1tYXNrXT1cImhpZGRlbkxhYmVsXCIgYXR0ci5hcmlhLWhpZGRlbj1cInt7aGlkZGVuTGFiZWx9fVwiPlxuXHR7e2xhYmVsfX08c3VwIGNsYXNzPVwiZm9ybUxhYmVsLXJlcXVpcmVkXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgKm5nSWY9XCJyZXF1aXJlZFwiPio8L3N1cD5cblx0PGx1LWljb24gaWNvbj1cImhlbHBPdXRsaW5lXCIgYWx0PVwiXCIgKm5nSWY9XCJ0b29sdGlwXCIgW2x1VG9vbHRpcF09XCJ0b29sdGlwXCI+PC9sdS1pY29uPlxuPC9sYWJlbD5cbjxuZy1jb250YWluZXIgW25nU3dpdGNoXT1cImxheW91dFwiPlxuXHQ8ZGl2IGNsYXNzPVwidGV4dEZpZWxkXCIgKm5nU3dpdGNoQ2FzZT1cIidkZWZhdWx0J1wiPlxuXHRcdDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJjb250ZW50VHBsXCI+PC9uZy1jb250YWluZXI+XG5cdDwvZGl2PlxuXHQ8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCInY2hlY2tib3gnXCI+XG5cdFx0PG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImNvbnRlbnRUcGxcIj48L25nLWNvbnRhaW5lcj5cblx0PC9uZy1jb250YWluZXI+XG48L25nLWNvbnRhaW5lcj5cbjxsdS1pbmxpbmUtbWVzc2FnZSBpZD1cInt7aWR9fS1tZXNzYWdlXCIgKm5nSWY9XCJpbmxpbmVNZXNzYWdlXCIgW2xhYmVsXT1cImlubGluZU1lc3NhZ2VcIiBbc3RhdGVdPVwiaW5saW5lTWVzc2FnZVN0YXRlXCI+PC9sdS1pbmxpbmUtbWVzc2FnZT5cbjwhLS1XZSBoYXZlIHRvIGRvIHRoaXMgYmVjYXVzZSBtdWx0aXBsZSBuZy1jb250ZW50IGluIHRoZSBzYW1lIHRlbXBsYXRlIGxlYWRzIHRvIHdlaXJkIGJlaGF2aW9ycy0tPlxuPG5nLXRlbXBsYXRlICNjb250ZW50VHBsPlxuXHQ8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG48L25nLXRlbXBsYXRlPlxuIl19