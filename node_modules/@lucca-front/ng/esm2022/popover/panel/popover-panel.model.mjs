/**
 * abstract class for basic implementation of a popover panel
 */
export class ALuPopoverPanel {
    constructor() {
        this._closeOnClick = false;
        this._trapFocus = false;
        this._scrollStrategy = 'reposition';
        this._positionClassesMap = {};
        this._panelClasses = '';
        this._contentClasses = '';
    }
    get isOpen() {
        return this._isOpen;
    }
    get closeOnClick() {
        return this._closeOnClick;
    }
    set closeOnClick(coc) {
        this._closeOnClick = coc;
    }
    get trapFocus() {
        return this._trapFocus;
    }
    set trapFocus(tf) {
        this._trapFocus = tf;
    }
    get scrollStrategy() {
        return this._scrollStrategy;
    }
    set scrollStrategy(ss) {
        this._scrollStrategy = ss;
    }
    get templateRef() {
        return this._templateRef;
    }
    set templateRef(tr) {
        this._templateRef = tr;
    }
    get panelClasses() {
        return this._panelClasses;
    }
    set panelClasses(cl) {
        this._panelClasses = cl;
    }
    get panelClassesMap() {
        const map = this._panelClasses
            .split(' ')
            .filter((c) => !!c)
            .reduce((obj, className) => {
            obj[className] = true;
            return obj;
        }, {});
        // also add position classes
        return { ...map, ...this._positionClassesMap };
    }
    get contentClasses() {
        return this._contentClasses;
    }
    set contentClasses(cl) {
        this._contentClasses = cl;
    }
    get contentClassesMap() {
        return this._contentClasses.split(' ').reduce((obj, className) => {
            obj[className] = true;
            return obj;
        }, {});
    }
    get overlayPaneClass() {
        return this._overlayPaneClass;
    }
    set overlayPaneClass(opc) {
        this._overlayPaneClass = opc;
    }
    set keydownEvents$(evt$) {
        if (!this._keydownEventsSub) {
            this._keydownEventsSub = evt$.subscribe((e) => this._handleKeydown(e));
        }
    }
    setPositionClasses(posX, posY) {
        this._positionClassesMap['is-before'] = posX === 'end';
        this._positionClassesMap['is-after'] = posX === 'start';
        this._positionClassesMap['is-above'] = posY === 'bottom';
        this._positionClassesMap['is-below'] = posY === 'top';
    }
    onClick() {
        if (this.closeOnClick) {
            this._emitCloseEvent();
        }
    }
    onOpen() {
        this._isOpen = true;
    }
    onClose() {
        this._isOpen = false;
    }
    /**
     * TODO: Refactor when @angular/cdk includes feature I mentioned on github see link below.
     * https://github.com/angular/material2/pull/5493#issuecomment-313085323
     */
    /** Disables close of popover when leaving trigger element and mouse over the popover */
    onMouseOver() {
        this._emitHoveredEvent(true);
    }
    /** Enables close of popover when mouse leaving popover element */
    onMouseLeave() {
        this._emitHoveredEvent(false);
    }
    /** does nothing but must be overridable */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    onMouseDown() { }
    _handleKeydown(event) {
        switch (event.key) {
            case 'Escape':
                this._emitCloseEvent();
                return;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wb3Zlci1wYW5lbC5tb2RlbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL25nL3BvcG92ZXIvcGFuZWwvcG9wb3Zlci1wYW5lbC5tb2RlbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQ0E7O0dBRUc7QUFDSCxNQUFNLE9BQWdCLGVBQWU7SUFBckM7UUFTVyxrQkFBYSxHQUFHLEtBQUssQ0FBQztRQVF0QixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBUW5CLG9CQUFlLEdBQTRCLFlBQVksQ0FBQztRQWdCeEQsd0JBQW1CLEdBQTRCLEVBQUUsQ0FBQztRQUNsRCxrQkFBYSxHQUFHLEVBQUUsQ0FBQztRQW1CbkIsb0JBQWUsR0FBRyxFQUFFLENBQUM7SUFpRmhDLENBQUM7SUF6SUEsSUFBSSxNQUFNO1FBQ1QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3JCLENBQUM7SUFHRCxJQUFJLFlBQVk7UUFDZixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDM0IsQ0FBQztJQUNELElBQUksWUFBWSxDQUFDLEdBQVk7UUFDNUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUM7SUFDMUIsQ0FBQztJQUdELElBQUksU0FBUztRQUNaLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN4QixDQUFDO0lBQ0QsSUFBSSxTQUFTLENBQUMsRUFBVztRQUN4QixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBR0QsSUFBSSxjQUFjO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztJQUM3QixDQUFDO0lBQ0QsSUFBSSxjQUFjLENBQUMsRUFBMkI7UUFDN0MsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUdELElBQUksV0FBVztRQUNkLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUMxQixDQUFDO0lBQ0QsSUFBSSxXQUFXLENBQUMsRUFB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QztJQUNELGtFQUFrRTtJQUNsRSxZQUFZO1FBQ1gsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFDRCwyQ0FBMkM7SUFDM0MsZ0VBQWdFO0lBQ2hFLFdBQVcsS0FBSSxDQUFDO0lBRWhCLGNBQWMsQ0FBQyxLQUFvQjtRQUNsQyxRQUFRLEtBQUssQ0FBQyxHQUFHLEVBQUU7WUFDbEIsS0FBSyxRQUFRO2dCQUNaLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztnQkFDdkIsT0FBTztTQUNSO0lBQ0YsQ0FBQztDQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSG9yaXpvbnRhbENvbm5lY3Rpb25Qb3MsIFZlcnRpY2FsQ29ubmVjdGlvblBvcyB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcbmltcG9ydCB7IFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcblxuZXhwb3J0IHR5cGUgTHVQb3BvdmVyU2Nyb2xsU3RyYXRlZ3kgPSAncmVwb3NpdGlvbicgfCAnYmxvY2snIHwgJ2Nsb3NlJztcblxuZXhwb3J0IGRlY2xhcmUgaW50ZXJmYWNlIElMdVBvcG92ZXJQYW5lbDxUID0gdW5rbm93bj4ge1xuXHRzY3JvbGxTdHJhdGVneTogTHVQb3BvdmVyU2Nyb2xsU3RyYXRlZ3k7XG5cdGNsb3NlT25DbGljazogYm9vbGVhbjtcblx0cGFuZWxJZD86IHN0cmluZztcblx0dHJpZ2dlcklkPzogc3RyaW5nO1xuXHR0ZW1wbGF0ZVJlZj86IFRlbXBsYXRlUmVmPFQ+O1xuXG5cdC8qKiB3aWxsIGVtaXQgd2hlbiB0aGUgcGFuZWwgd2FudHMgdG8gY2xvc2UgKi9cblx0Y2xvc2U6IE9ic2VydmFibGU8dm9pZD47XG5cdC8qKiB3aWxsIGVtaXQgd2hlbiB0aGUgcGFuZWwgd2FudHMgdG8gb3BlbiAqL1xuXHRvcGVuOiBPYnNlcnZhYmxlPHZvaWQ+O1xuXHQvKiogd2lsbCBlbWl0IHdoZW4gdGhlIHBhbmVsIGlzIGhvdmVyZWQgKi9cblx0aG92ZXJlZDogT2JzZXJ2YWJsZTxib29sZWFuPjtcblx0LyoqIGNsYXNzZXMgdG8gYXBwbHkgdG8gdGhlIHBhbmVsLCB1c2VzICcgJyBmb3Igc2VwYXJhdGluZyB2YWx1ZXMgKi9cblx0cGFuZWxDbGFzc2VzOiBzdHJpbmc7XG5cdC8qKiBjbGFzcyB0byBhcHBseSB0byB0aGUgcGFuZWwgY29udGVudCwgdXNlcyAnICcgZm9yIHNlcGFyYXRpbmcgdmFsdWVzICovXG5cdGNvbnRlbnRDbGFzc2VzOiBzdHJpbmc7XG5cblx0a2V5ZG93bkV2ZW50cyQ6IE9ic2VydmFibGU8S2V5Ym9hcmRFdmVudD47XG5cblx0c2V0UG9zaXRpb25DbGFzc2VzOiAocG9zWDogSG9yaXpvbnRhbENvbm5lY3Rpb25Qb3MsIHBvc1k6IFZlcnRpY2FsQ29ubmVjdGlvblBvcykgPT4gdm9pZDtcblxuXHQvKiogbWV0aG9kIGNhbGxlZCBieSB0aGUgdHJpZ2dlciB3aGVuIGl0IG9wZW5zIHRoZSBwb3BvdmVyICovXG5cdG9uT3BlbigpOiB2b2lkO1xuXHQvKiogbWV0aG9kIGNhbGxlZCBieSB0aGUgdHJpZ2dlciB3aGVuIGl0IGNsb3NlcyB0aGUgcG9wb3ZlciAqL1xuXHRvbkNsb3NlKCk6IHZvaWQ7XG59XG4vKipcbiAqIGFic3RyYWN0IGNsYXNzIGZvciBiYXNpYyBpbXBsZW1lbnRhdGlvbiBvZiBhIHBvcG92ZXIgcGFuZWxcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFMdVBvcG92ZXJQYW5lbDxUID0gdW5rbm93bj4gaW1wbGVtZW50cyBJTHVQb3BvdmVyUGFuZWw8VD4ge1xuXHRwYW5lbElkOiBzdHJpbmc7XG5cdHRyaWdnZXJJZDogc3RyaW5nO1xuXG5cdHByb3RlY3RlZCBfaXNPcGVuOiBib29sZWFuO1xuXHRnZXQgaXNPcGVuKCkge1xuXHRcdHJldHVybiB0aGlzLl9pc09wZW47XG5cdH1cblxuXHRwcm90ZWN0ZWQgX2Nsb3NlT25DbGljayA9IGZhbHNlO1xuXHRnZXQgY2xvc2VPbkNsaWNrKCkge1xuXHRcdHJldHVybiB0aGlzLl9jbG9zZU9uQ2xpY2s7XG5cdH1cblx0c2V0IGNsb3NlT25DbGljayhjb2M6IGJvb2xlYW4pIHtcblx0XHR0aGlzLl9jbG9zZU9uQ2xpY2sgPSBjb2M7XG5cdH1cblxuXHRwcm90ZWN0ZWQgX3RyYXBGb2N1cyA9IGZhbHNlO1xuXHRnZXQgdHJhcEZvY3VzKCkge1xuXHRcdHJldHVybiB0aGlzLl90cmFwRm9jdXM7XG5cdH1cblx0c2V0IHRyYXBGb2N1cyh0ZjogYm9vbGVhbikge1xuXHRcdHRoaXMuX3RyYXBGb2N1cyA9IHRmO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9zY3JvbGxTdHJhdGVneTogTHVQb3BvdmVyU2Nyb2xsU3RyYXRlZ3kgPSAncmVwb3NpdGlvbic7XG5cdGdldCBzY3JvbGxTdHJhdGVneSgpIHtcblx0XHRyZXR1cm4gdGhpcy5fc2Nyb2xsU3RyYXRlZ3k7XG5cdH1cblx0c2V0IHNjcm9sbFN0cmF0ZWd5KHNzOiBMdVBvcG92ZXJTY3JvbGxTdHJhdGVneSkge1xuXHRcdHRoaXMuX3Njcm9sbFN0cmF0ZWd5ID0gc3M7XG5cdH1cblxuXHRwcm90ZWN0ZWQgX3RlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxUPjtcblx0Z2V0IHRlbXBsYXRlUmVmKCkge1xuXHRcdHJldHVybiB0aGlzLl90ZW1wbGF0ZVJlZjtcblx0fVxuXHRzZXQgdGVtcGxhdGVSZWYodHI6IFRlbXBsYXRlUmVmPFQ+KSB7XG5cdFx0dGhpcy5fdGVtcGxhdGVSZWYgPSB0cjtcblx0fVxuXG5cdHByb3RlY3RlZCBfcG9zaXRpb25DbGFzc2VzTWFwOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9O1xuXHRwcm90ZWN0ZWQgX3BhbmVsQ2xhc3NlcyA9ICcnO1xuXHRnZXQgcGFuZWxDbGFzc2VzKCkge1xuXHRcdHJldHVybiB0aGlzLl9wYW5lbENsYXNzZXM7XG5cdH1cblx0c2V0IHBhbmVsQ2xhc3NlcyhjbDogc3RyaW5nKSB7XG5cdFx0dGhpcy5fcGFuZWxDbGFzc2VzID0gY2w7XG5cdH1cblx0Z2V0IHBhbmVsQ2xhc3Nlc01hcCgpOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiB7XG5cdFx0Y29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHRoaXMuX3BhbmVsQ2xhc3Nlc1xuXHRcdFx0LnNwbGl0KCcgJylcblx0XHRcdC5maWx0ZXIoKGMpID0+ICEhYylcblx0XHRcdC5yZWR1Y2UoKG9iajogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4sIGNsYXNzTmFtZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdG9ialtjbGFzc05hbWVdID0gdHJ1ZTtcblx0XHRcdFx0cmV0dXJuIG9iajtcblx0XHRcdH0sIHt9KTtcblx0XHQvLyBhbHNvIGFkZCBwb3NpdGlvbiBjbGFzc2VzXG5cdFx0cmV0dXJuIHsgLi4ubWFwLCAuLi50aGlzLl9wb3NpdGlvbkNsYXNzZXNNYXAgfTtcblx0fVxuXG5cdHByb3RlY3RlZCBfY29udGVudENsYXNzZXMgPSAnJztcblx0Z2V0IGNvbnRlbnRDbGFzc2VzKCkge1xuXHRcdHJldHVybiB0aGlzLl9jb250ZW50Q2xhc3Nlcztcblx0fVxuXHRzZXQgY29udGVudENsYXNzZXMoY2w6IHN0cmluZykge1xuXHRcdHRoaXMuX2NvbnRlbnRDbGFzc2VzID0gY2w7XG5cdH1cblx0Z2V0IGNvbnRlbnRDbGFzc2VzTWFwKCkge1xuXHRcdHJldHVybiB0aGlzLl9jb250ZW50Q2xhc3Nlcy5zcGxpdCgnICcpLnJlZHVjZSgob2JqOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiwgY2xhc3NOYW1lOiBzdHJpbmcpID0+IHtcblx0XHRcdG9ialtjbGFzc05hbWVdID0gdHJ1ZTtcblx0XHRcdHJldHVybiBvYmo7XG5cdFx0fSwge30pO1xuXHR9XG5cblx0LyoqIENsYXNzZXMgdG8gYmUgcGFzc2VkIGludG8gdGhlIHBvcG92ZXIncyBvdmVybGF5ICovXG5cdHByb3RlY3RlZCBfb3ZlcmxheVBhbmVDbGFzczogc3RyaW5nIHwgc3RyaW5nW107XG5cdHB1YmxpYyBnZXQgb3ZlcmxheVBhbmVDbGFzcygpIHtcblx0XHRyZXR1cm4gdGhpcy5fb3ZlcmxheVBhbmVDbGFzcztcblx0fVxuXHRwdWJsaWMgc2V0IG92ZXJsYXlQYW5lQ2xhc3Mob3BjKSB7XG5cdFx0dGhpcy5fb3ZlcmxheVBhbmVDbGFzcyA9IG9wYztcblx0fVxuXG5cdC8vIC8qKiBDb25maWcgb2JqZWN0IHRvIGJlIHBhc3NlZCBpbnRvIHRoZSBwb3BvdmVyJ3MgY29udGVudCBuZ1N0eWxlICovXG5cblx0cHJvdGVjdGVkIF9rZXlkb3duRXZlbnRzU3ViOiBTdWJzY3JpcHRpb247XG5cdHNldCBrZXlkb3duRXZlbnRzJChldnQkOiBPYnNlcnZhYmxlPEtleWJvYXJkRXZlbnQ+KSB7XG5cdFx0aWYgKCF0aGlzLl9rZXlkb3duRXZlbnRzU3ViKSB7XG5cdFx0XHR0aGlzLl9rZXlkb3duRXZlbnRzU3ViID0gZXZ0JC5zdWJzY3JpYmUoKGUpID0+IHRoaXMuX2hhbmRsZUtleWRvd24oZSkpO1xuXHRcdH1cblx0fVxuXG5cdGNsb3NlOiBPYnNlcnZhYmxlPHZvaWQ+O1xuXHRvcGVuOiBPYnNlcnZhYmxlPHZvaWQ+O1xuXHRob3ZlcmVkOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuXHRhYnN0cmFjdCBfZW1pdENsb3NlRXZlbnQoKTogdm9pZDtcblx0YWJzdHJhY3QgX2VtaXRPcGVuRXZlbnQoKTogdm9pZDtcblx0YWJzdHJhY3QgX2VtaXRIb3ZlcmVkRXZlbnQoaG92ZXJlZDogYm9vbGVhbik6IHZvaWQ7XG5cblx0c2V0UG9zaXRpb25DbGFzc2VzKHBvc1g6IEhvcml6b250YWxDb25uZWN0aW9uUG9zLCBwb3NZOiBWZXJ0aWNhbENvbm5lY3Rpb25Qb3MpOiB2b2lkIHtcblx0XHR0aGlzLl9wb3NpdGlvbkNsYXNzZXNNYXBbJ2lzLWJlZm9yZSddID0gcG9zWCA9PT0gJ2VuZCc7XG5cdFx0dGhpcy5fcG9zaXRpb25DbGFzc2VzTWFwWydpcy1hZnRlciddID0gcG9zWCA9PT0gJ3N0YXJ0Jztcblx0XHR0aGlzLl9wb3NpdGlvbkNsYXNzZXNNYXBbJ2lzLWFib3ZlJ10gPSBwb3NZID09PSAnYm90dG9tJztcblx0XHR0aGlzLl9wb3NpdGlvbkNsYXNzZXNNYXBbJ2lzLWJlbG93J10gPSBwb3NZID09PSAndG9wJztcblx0fVxuXG5cdG9uQ2xpY2soKSB7XG5cdFx0aWYgKHRoaXMuY2xvc2VPbkNsaWNrKSB7XG5cdFx0XHR0aGlzLl9lbWl0Q2xvc2VFdmVudCgpO1xuXHRcdH1cblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHR0aGlzLl9pc09wZW4gPSB0cnVlO1xuXHR9XG5cdG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5faXNPcGVuID0gZmFsc2U7XG5cdH1cblx0LyoqXG5cdCAqIFRPRE86IFJlZmFjdG9yIHdoZW4gQGFuZ3VsYXIvY2RrIGluY2x1ZGVzIGZlYXR1cmUgSSBtZW50aW9uZWQgb24gZ2l0aHViIHNlZSBsaW5rIGJlbG93LlxuXHQgKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbDIvcHVsbC81NDkzI2lzc3VlY29tbWVudC0zMTMwODUzMjNcblx0ICovXG5cdC8qKiBEaXNhYmxlcyBjbG9zZSBvZiBwb3BvdmVyIHdoZW4gbGVhdmluZyB0cmlnZ2VyIGVsZW1lbnQgYW5kIG1vdXNlIG92ZXIgdGhlIHBvcG92ZXIgKi9cblx0b25Nb3VzZU92ZXIoKSB7XG5cdFx0dGhpcy5fZW1pdEhvdmVyZWRFdmVudCh0cnVlKTtcblx0fVxuXHQvKiogRW5hYmxlcyBjbG9zZSBvZiBwb3BvdmVyIHdoZW4gbW91c2UgbGVhdmluZyBwb3BvdmVyIGVsZW1lbnQgKi9cblx0b25Nb3VzZUxlYXZlKCkge1xuXHRcdHRoaXMuX2VtaXRIb3ZlcmVkRXZlbnQoZmFsc2UpO1xuXHR9XG5cdC8qKiBkb2VzIG5vdGhpbmcgYnV0IG11c3QgYmUgb3ZlcnJpZGFibGUgKi9cblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuXHRvbk1vdXNlRG93bigpIHt9XG5cblx0X2hhbmRsZUtleWRvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcblx0XHRzd2l0Y2ggKGV2ZW50LmtleSkge1xuXHRcdFx0Y2FzZSAnRXNjYXBlJzpcblx0XHRcdFx0dGhpcy5fZW1pdENsb3NlRXZlbnQoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxufVxuIl19