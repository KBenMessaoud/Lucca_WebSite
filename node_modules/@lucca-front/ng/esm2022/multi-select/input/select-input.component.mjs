import { CommonModule } from '@angular/common';
import { ChangeDetectionStrategy, Component, forwardRef, HostBinding, inject, Input } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { getIntl } from '@lucca-front/ng/core';
import { ALuSelectInputComponent, provideLuSelectLabelsAndIds, provideLuSelectOverlayContainer, ɵLuOptionOutletDirective } from '@lucca-front/ng/core-select';
import { LuTooltipModule } from '@lucca-front/ng/tooltip';
import { ReplaySubject } from 'rxjs';
import { LuMultiSelectDefaultDisplayerComponent } from '../displayer/index';
import { LU_MULTI_SELECT_TRANSLATIONS } from '../select.translate';
import { LuMultiSelectPanelRefFactory } from './panel-ref.factory';
import { IconComponent } from '@lucca-front/ng/icon';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
class LuMultiSelectInputComponent extends ALuSelectInputComponent {
    constructor() {
        super(...arguments);
        this.intl = getIntl(LU_MULTI_SELECT_TRANSLATIONS);
        this.modMultipleClass = true;
        this.valuesTpl = LuMultiSelectDefaultDisplayerComponent;
        // TODO this is for select all
        // @Output() selectAll = new EventEmitter<void>();
        this.expanded = false;
        this.areAllOptionsSelected$ = new ReplaySubject(1);
        this.panelRefFactory = inject(LuMultiSelectPanelRefFactory);
    }
    get panelRef() {
        return this._panelRef;
    }
    writeValue(value) {
        super.writeValue(value);
        this.panelRef?.updateSelectedOptions(value);
    }
    buildPanelRef() {
        return this.panelRefFactory.buildPanelRef({
            initialValue: this.value,
            optionComparer: this.optionComparer,
            options$: this.options$,
            loading$: this.loading$,
            searchable: this.searchable,
            optionTpl: this.optionTpl,
            canSelectAll: false,
            areAllOptionsSelected$: this.areAllOptionsSelected$,
            expanded: this.expanded,
        }, this.overlayConfig, this.expandedPositionStrategy);
    }
    bindInputToPanelRefEvents() {
        if (!this.panelRef) {
            return;
        }
        super.bindInputToPanelRefEvents();
        // TODO This is for select all
        // this.panelRef.selectAll.subscribe(() => this.selectAll.emit());
    }
    get hasValue() {
        return this.value && this.value.length > 0;
    }
    clearValue(event) {
        event.stopPropagation();
        this.onChange?.([]);
        this.value = [];
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.3", ngImport: i0, type: LuMultiSelectInputComponent, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.3", type: LuMultiSelectInputComponent, isStandalone: true, selector: "lu-multi-select", inputs: { valuesTpl: "valuesTpl", expandedPositionStrategy: "expandedPositionStrategy", expanded: "expanded", panelRef: "panelRef" }, host: { properties: { "class.mod-multiple": "this.modMultipleClass" } }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => LuMultiSelectInputComponent),
                multi: true,
            },
            {
                provide: ALuSelectInputComponent,
                useExisting: forwardRef(() => LuMultiSelectInputComponent),
            },
            provideLuSelectOverlayContainer(),
            provideLuSelectLabelsAndIds(),
            LuMultiSelectPanelRefFactory,
        ], usesInheritance: true, ngImport: i0, template: "<div class=\"lu-select-placeholder\">{{ placeholder }}</div>\n<div class=\"lu-select-value\">\n\t<div class=\"lu-select-display-wrapper\">\n\t\t<ng-container *luOptionOutlet=\"valuesTpl; value: value\"></ng-container>\n\t</div>\n</div>\n<div class=\"lu-select-suffix\">\n\t<a *ngIf=\"hasValue && clearable\" role=\"button\" class=\"clear\" (click)=\"clearValue($event)\">\n\t\t<span class=\"u-mask\">{{intl.clear}}</span>\n\t</a>\n</div>\n", styles: [":root{--components-options-item-padding-vertical: var(--spacings-XS);--components-options-item-padding-horizontal: var(--spacings-XS);--components-options-item-multiple-padding: 2.25rem;--components-options-item-icon-color: var(--palettes-grey-800);--components-options-checkbox-left: .5rem;--components-options-checkbox-size: 1.25rem;--components-options-checkbox-color: var(--palettes-primary-700);--components-options-checkbox-border-radius: 6px;--components-options-checkbox-border-color: var(--palettes-grey-700);--components-options-establishment-multiple-padding: 2rem}:host{--components-select-input-padding-horizontal: var(--spacings-XS);--components-select-input-padding-vertical: var(--spacings-XS);--components-select-framed-color: var(--palettes-grey-500);--components-select-framed-color50: var(--palettes-grey-50);--components-select-framed-see-through: var(--palettes-grey-50);--components-select-framed-text: var(--palettes-grey-800);--components-select-framed-placeholder: #cccccc;--components-select-framed-side-padding: var(--spacings-S);--components-select-framed-top-padding: var(--spacings-L);--components-select-framed-bottom-padding: var(--spacings-S);--components-select-framed-label-top-offset: var(--spacings-XS);cursor:pointer;outline:none;padding:0;gap:0}:host:after{display:inline-block;vertical-align:text-bottom;font-style:normal;font-family:Lucca icons;color:var(--palettes-grey-600);bottom:var(--components-select-input-padding-vertical);font-size:var(--sizes-M-lineHeight);line-height:var(--sizes-M-lineHeight);pointer-events:none;position:absolute;right:var(--components-select-input-padding-horizontal);transition:transform var(--commons-animations-durations-standard) ease}@supports (content: \"*\"/\"\"){:host:after{content:\"\\e97c\"/\"\"}}@supports not (content: \"*\"/\"\"){:host:after{content:\"\\e97c\"}}:host[disabled],:host.is-disabled{cursor:not-allowed;pointer-events:all}.lu-select-display-wrapper{display:block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.lu-select-value{line-height:var(--sizes-M-lineHeight);min-height:calc(var(--components-select-framed-bottom-padding) + var(--sizes-M-lineHeight));padding:var(--components-select-input-padding-vertical) 3.5rem var(--components-select-input-padding-vertical) var(--components-select-input-padding-horizontal);transition:all var(--commons-animations-durations-standard);display:none}.lu-select-placeholder{color:var(--palettes-grey-400);line-height:var(--sizes-M-lineHeight);min-height:calc(var(--components-select-framed-bottom-padding) + var(--sizes-M-lineHeight));padding:var(--components-select-input-padding-vertical) 3.5rem var(--components-select-input-padding-vertical) var(--components-select-input-padding-horizontal);transition:all var(--commons-animations-durations-standard);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.lu-select-suffix,.lu-select-clearer{position:absolute;bottom:.75rem;right:2.25rem}::ng-deep .lu-select-value .label{padding:var(--spacings-XXS) var(--spacings-XS);margin-left:0}::ng-deep .lu-select-value .chip{vertical-align:baseline;max-width:100%;margin:0 var(--spacings-XXS) var(--spacings-XXS) 0;text-overflow:ellipsis;overflow:hidden;vertical-align:top;white-space:nowrap}:host-context(.textfield.mod-S){padding:0}:host-context(.textfield.mod-S) .lu-select-value,:host-context(.textfield.mod-S) .lu-select-placeholder{font-size:var(--sizes-S-fontSize);line-height:var(--sizes-XS-lineHeight);min-height:calc(var(--components-select-framed-bottom-padding) + var(--sizes-XS-lineHeight))}:host-context(.textfield.mod-S) .lu-select-clearer{bottom:var(--spacings-XS)}:host-context(.textfield.mod-S):after{line-height:var(--sizes-XS-lineHeight);font-size:var(--sizes-S-lineHeight)}:host-context(.textfield.mod-S) .lu-select-suffix{bottom:.5rem;right:2rem}:host-context(.textfield.mod-S) ::ng-deep .lu-select-value .label{font-size:var(--sizes-S-fontSize);line-height:var(--sizes-S-lineHeight);font-weight:600;margin:0;padding:0;background-color:transparent}:host-context(.textfield.mod-S) ::ng-deep .lu-select-value .chip{height:var(--sizes-XS-lineHeight);line-height:var(--sizes-XS-lineHeight);font-size:var(--sizes-XS-fontSize);padding-left:var(--spacings-XXS);padding-right:var(--spacings-XXS);gap:var(--spacings-XXS)}:host-context(.textfield.mod-S) ::ng-deep .lu-select-value .numericBadge{--components-numericBadge-size: 1.25rem;--components-numericBadge-borderRadius: 6px;--components-numericBadge-fontSize: var(--sizes-XS-fontSize);--components-numericBadge-lineHeight: var(--sizes-XS-lineHeight)}:host-context(.textfield.mod-framed).textfield-input,:host-context(.form.mod-framed).textfield-input{padding:var(--components-select-framed-top-padding) 0 0}:host-context(.textfield.mod-framed).textfield-input:after,:host-context(.form.mod-framed).textfield-input:after{color:var(--palettes-grey-500);bottom:var(--components-select-framed-bottom-padding);right:var(--spacings-XS)}:host-context(.textfield.mod-framed).textfield-input .lu-select-value,:host-context(.form.mod-framed).textfield-input .lu-select-value{padding:0 calc(var(--components-select-framed-side-padding) * 3) var(--components-select-framed-bottom-padding) var(--components-select-framed-side-padding)}:host-context(.textfield.mod-framed).textfield-input .lu-select-placeholder,:host-context(.form.mod-framed).textfield-input .lu-select-placeholder{color:var(--palettes-grey-400);padding:0 calc(var(--components-select-framed-side-padding) * 3) var(--components-select-framed-bottom-padding) var(--components-select-framed-side-padding)}:host-context(.textfield.mod-framed).textfield-input .lu-select-suffix,:host-context(.form.mod-framed).textfield-input .lu-select-suffix{bottom:var(--components-select-framed-bottom-padding);right:1.7rem}:host-context(.textfield.mod-filter) .lu-select-value,:host-context(.textfield.mod-filter) .lu-select-placeholder{padding:0;height:auto;padding-top:var(--spacings-S);color:var(--palettes-grey-800)}:host-context(.textfield.mod-material):after{color:var(--palettes-grey-500);bottom:.6rem;right:0}:host-context(.textfield.mod-material) .lu-select-value,:host-context(.textfield.mod-material) .lu-select-placeholder{padding-left:0;padding-right:.8rem}:host-context(.textfield.mod-material) .lu-select-suffix{right:calc(2 * var(--components-select-input-padding-horizontal))}:host-context(.textfield.mod-material).is-select .lu-select-placeholder{display:none}:host-context(.textfield.mod-material).mod-search:after{bottom:0}:host-context(.textfield.mod-material).mod-search .lu-select-suffix{right:calc(2.75 * var(--components-select-input-padding-horizontal))}:host-context(.textfield.mod-material .textfield-input.is-focused) .lu-select-placeholder{display:none}:host(.mod-multiple) .lu-select-value{height:auto;align-items:center}:host(.mod-multiple) .lu-select-display-wrapper{overflow:visible;white-space:normal;margin-bottom:calc(var(--spacings-XXS) * -1)}:host-context(.textfield.mod-outlined).textfield-input:after{color:var(--palettes-grey-600)}:host-context(.textfield.mod-outlined).textfield-input .lu-select-placeholder{color:var(--palettes-grey-400)}:host-context(.textfield.mod-outlined) :host-context(.textfield-input.is-error):after{color:var(--palettes-error-600)}:host-context(.textfield.mod-outlined) :host-context(.textfield-input.is-error) .lu-select-placeholder{color:var(--palettes-error-400)}:host-context(.textfield-input.is-filled) .lu-select-placeholder{display:none}:host-context(.textfield-input.is-filled) .lu-select-value{display:flex;align-items:flex-start}:host-context(.textfield .textfield-input.is-focused):after{transform:rotate(-180deg)}:host-context(.textfield-input.is-clearable) .lu-select-value{padding-right:3.5rem}:host-context(.textfield-input.is-error):after{color:var(--palettes-error-700)}:host-context(.textfield-input.is-error) .lu-select-placeholder{color:var(--palettes-error-400)}:host-context(.textfield-input.is-disabled,.textfield-input[disabled]):after{color:var(--commons-disabled-color)}:host-context(.textfield-input.is-disabled,.textfield-input[disabled]) .lu-select-placeholder{color:var(--commons-disabled-placeholder)}:host[aria-expanded=true]{outline:none}.lu-select-value{padding-right:2rem}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "ngmodule", type: LuTooltipModule }, { kind: "directive", type: ɵLuOptionOutletDirective, selector: "[luOptionOutlet]", inputs: ["luOptionOutlet", "luOptionOutletValue"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
export { LuMultiSelectInputComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.3", ngImport: i0, type: LuMultiSelectInputComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lu-multi-select', standalone: true, imports: [CommonModule, LuTooltipModule, ɵLuOptionOutletDirective, IconComponent], changeDetection: ChangeDetectionStrategy.OnPush, providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => LuMultiSelectInputComponent),
                            multi: true,
                        },
                        {
                            provide: ALuSelectInputComponent,
                            useExisting: forwardRef(() => LuMultiSelectInputComponent),
                        },
                        provideLuSelectOverlayContainer(),
                        provideLuSelectLabelsAndIds(),
                        LuMultiSelectPanelRefFactory,
                    ], template: "<div class=\"lu-select-placeholder\">{{ placeholder }}</div>\n<div class=\"lu-select-value\">\n\t<div class=\"lu-select-display-wrapper\">\n\t\t<ng-container *luOptionOutlet=\"valuesTpl; value: value\"></ng-container>\n\t</div>\n</div>\n<div class=\"lu-select-suffix\">\n\t<a *ngIf=\"hasValue && clearable\" role=\"button\" class=\"clear\" (click)=\"clearValue($event)\">\n\t\t<span class=\"u-mask\">{{intl.clear}}</span>\n\t</a>\n</div>\n", styles: [":root{--components-options-item-padding-vertical: var(--spacings-XS);--components-options-item-padding-horizontal: var(--spacings-XS);--components-options-item-multiple-padding: 2.25rem;--components-options-item-icon-color: var(--palettes-grey-800);--components-options-checkbox-left: .5rem;--components-options-checkbox-size: 1.25rem;--components-options-checkbox-color: var(--palettes-primary-700);--components-options-checkbox-border-radius: 6px;--components-options-checkbox-border-color: var(--palettes-grey-700);--components-options-establishment-multiple-padding: 2rem}:host{--components-select-input-padding-horizontal: var(--spacings-XS);--components-select-input-padding-vertical: var(--spacings-XS);--components-select-framed-color: var(--palettes-grey-500);--components-select-framed-color50: var(--palettes-grey-50);--components-select-framed-see-through: var(--palettes-grey-50);--components-select-framed-text: var(--palettes-grey-800);--components-select-framed-placeholder: #cccccc;--components-select-framed-side-padding: var(--spacings-S);--components-select-framed-top-padding: var(--spacings-L);--components-select-framed-bottom-padding: var(--spacings-S);--components-select-framed-label-top-offset: var(--spacings-XS);cursor:pointer;outline:none;padding:0;gap:0}:host:after{display:inline-block;vertical-align:text-bottom;font-style:normal;font-family:Lucca icons;color:var(--palettes-grey-600);bottom:var(--components-select-input-padding-vertical);font-size:var(--sizes-M-lineHeight);line-height:var(--sizes-M-lineHeight);pointer-events:none;position:absolute;right:var(--components-select-input-padding-horizontal);transition:transform var(--commons-animations-durations-standard) ease}@supports (content: \"*\"/\"\"){:host:after{content:\"\\e97c\"/\"\"}}@supports not (content: \"*\"/\"\"){:host:after{content:\"\\e97c\"}}:host[disabled],:host.is-disabled{cursor:not-allowed;pointer-events:all}.lu-select-display-wrapper{display:block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.lu-select-value{line-height:var(--sizes-M-lineHeight);min-height:calc(var(--components-select-framed-bottom-padding) + var(--sizes-M-lineHeight));padding:var(--components-select-input-padding-vertical) 3.5rem var(--components-select-input-padding-vertical) var(--components-select-input-padding-horizontal);transition:all var(--commons-animations-durations-standard);display:none}.lu-select-placeholder{color:var(--palettes-grey-400);line-height:var(--sizes-M-lineHeight);min-height:calc(var(--components-select-framed-bottom-padding) + var(--sizes-M-lineHeight));padding:var(--components-select-input-padding-vertical) 3.5rem var(--components-select-input-padding-vertical) var(--components-select-input-padding-horizontal);transition:all var(--commons-animations-durations-standard);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.lu-select-suffix,.lu-select-clearer{position:absolute;bottom:.75rem;right:2.25rem}::ng-deep .lu-select-value .label{padding:var(--spacings-XXS) var(--spacings-XS);margin-left:0}::ng-deep .lu-select-value .chip{vertical-align:baseline;max-width:100%;margin:0 var(--spacings-XXS) var(--spacings-XXS) 0;text-overflow:ellipsis;overflow:hidden;vertical-align:top;white-space:nowrap}:host-context(.textfield.mod-S){padding:0}:host-context(.textfield.mod-S) .lu-select-value,:host-context(.textfield.mod-S) .lu-select-placeholder{font-size:var(--sizes-S-fontSize);line-height:var(--sizes-XS-lineHeight);min-height:calc(var(--components-select-framed-bottom-padding) + var(--sizes-XS-lineHeight))}:host-context(.textfield.mod-S) .lu-select-clearer{bottom:var(--spacings-XS)}:host-context(.textfield.mod-S):after{line-height:var(--sizes-XS-lineHeight);font-size:var(--sizes-S-lineHeight)}:host-context(.textfield.mod-S) .lu-select-suffix{bottom:.5rem;right:2rem}:host-context(.textfield.mod-S) ::ng-deep .lu-select-value .label{font-size:var(--sizes-S-fontSize);line-height:var(--sizes-S-lineHeight);font-weight:600;margin:0;padding:0;background-color:transparent}:host-context(.textfield.mod-S) ::ng-deep .lu-select-value .chip{height:var(--sizes-XS-lineHeight);line-height:var(--sizes-XS-lineHeight);font-size:var(--sizes-XS-fontSize);padding-left:var(--spacings-XXS);padding-right:var(--spacings-XXS);gap:var(--spacings-XXS)}:host-context(.textfield.mod-S) ::ng-deep .lu-select-value .numericBadge{--components-numericBadge-size: 1.25rem;--components-numericBadge-borderRadius: 6px;--components-numericBadge-fontSize: var(--sizes-XS-fontSize);--components-numericBadge-lineHeight: var(--sizes-XS-lineHeight)}:host-context(.textfield.mod-framed).textfield-input,:host-context(.form.mod-framed).textfield-input{padding:var(--components-select-framed-top-padding) 0 0}:host-context(.textfield.mod-framed).textfield-input:after,:host-context(.form.mod-framed).textfield-input:after{color:var(--palettes-grey-500);bottom:var(--components-select-framed-bottom-padding);right:var(--spacings-XS)}:host-context(.textfield.mod-framed).textfield-input .lu-select-value,:host-context(.form.mod-framed).textfield-input .lu-select-value{padding:0 calc(var(--components-select-framed-side-padding) * 3) var(--components-select-framed-bottom-padding) var(--components-select-framed-side-padding)}:host-context(.textfield.mod-framed).textfield-input .lu-select-placeholder,:host-context(.form.mod-framed).textfield-input .lu-select-placeholder{color:var(--palettes-grey-400);padding:0 calc(var(--components-select-framed-side-padding) * 3) var(--components-select-framed-bottom-padding) var(--components-select-framed-side-padding)}:host-context(.textfield.mod-framed).textfield-input .lu-select-suffix,:host-context(.form.mod-framed).textfield-input .lu-select-suffix{bottom:var(--components-select-framed-bottom-padding);right:1.7rem}:host-context(.textfield.mod-filter) .lu-select-value,:host-context(.textfield.mod-filter) .lu-select-placeholder{padding:0;height:auto;padding-top:var(--spacings-S);color:var(--palettes-grey-800)}:host-context(.textfield.mod-material):after{color:var(--palettes-grey-500);bottom:.6rem;right:0}:host-context(.textfield.mod-material) .lu-select-value,:host-context(.textfield.mod-material) .lu-select-placeholder{padding-left:0;padding-right:.8rem}:host-context(.textfield.mod-material) .lu-select-suffix{right:calc(2 * var(--components-select-input-padding-horizontal))}:host-context(.textfield.mod-material).is-select .lu-select-placeholder{display:none}:host-context(.textfield.mod-material).mod-search:after{bottom:0}:host-context(.textfield.mod-material).mod-search .lu-select-suffix{right:calc(2.75 * var(--components-select-input-padding-horizontal))}:host-context(.textfield.mod-material .textfield-input.is-focused) .lu-select-placeholder{display:none}:host(.mod-multiple) .lu-select-value{height:auto;align-items:center}:host(.mod-multiple) .lu-select-display-wrapper{overflow:visible;white-space:normal;margin-bottom:calc(var(--spacings-XXS) * -1)}:host-context(.textfield.mod-outlined).textfield-input:after{color:var(--palettes-grey-600)}:host-context(.textfield.mod-outlined).textfield-input .lu-select-placeholder{color:var(--palettes-grey-400)}:host-context(.textfield.mod-outlined) :host-context(.textfield-input.is-error):after{color:var(--palettes-error-600)}:host-context(.textfield.mod-outlined) :host-context(.textfield-input.is-error) .lu-select-placeholder{color:var(--palettes-error-400)}:host-context(.textfield-input.is-filled) .lu-select-placeholder{display:none}:host-context(.textfield-input.is-filled) .lu-select-value{display:flex;align-items:flex-start}:host-context(.textfield .textfield-input.is-focused):after{transform:rotate(-180deg)}:host-context(.textfield-input.is-clearable) .lu-select-value{padding-right:3.5rem}:host-context(.textfield-input.is-error):after{color:var(--palettes-error-700)}:host-context(.textfield-input.is-error) .lu-select-placeholder{color:var(--palettes-error-400)}:host-context(.textfield-input.is-disabled,.textfield-input[disabled]):after{color:var(--commons-disabled-color)}:host-context(.textfield-input.is-disabled,.textfield-input[disabled]) .lu-select-placeholder{color:var(--commons-disabled-placeholder)}:host[aria-expanded=true]{outline:none}.lu-select-value{padding-right:2rem}\n"] }]
        }], propDecorators: { modMultipleClass: [{
                type: HostBinding,
                args: ['class.mod-multiple']
            }], valuesTpl: [{
                type: Input
            }], expandedPositionStrategy: [{
                type: Input
            }], expanded: [{
                type: Input
            }], panelRef: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LWlucHV0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL25nL211bHRpLXNlbGVjdC9pbnB1dC9zZWxlY3QtaW5wdXQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvbmcvbXVsdGktc2VsZWN0L2lucHV0L3NlbGVjdC1pbnB1dC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQXFCLE1BQU0sZUFBZSxDQUFDO0FBQzlILE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDL0MsT0FBTyxFQUFFLHVCQUF1QixFQUFtQiwyQkFBMkIsRUFBRSwrQkFBK0IsRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQy9LLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3JDLE9BQU8sRUFBRSxzQ0FBc0MsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQzVFLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ25FLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRW5FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQzs7O0FBRXJELE1Bc0JhLDJCQUErQixTQUFRLHVCQUErQjtJQXRCbkY7O1FBdUJDLFNBQUksR0FBRyxPQUFPLENBQUMsNEJBQTRCLENBQUMsQ0FB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QUFVLENBQUMsR0FBRyxFQUFFLDRCQUE0QixDQUFDO3lCQUMxRDt3QkFDRCwrQkFBK0IsRUFBRTt3QkFDakMsMkJBQTJCLEVBQUU7d0JBQzdCLDRCQUE0QjtxQkFDNUI7OEJBS2tDLGdCQUFnQjtzQkFBbEQsV0FBVzt1QkFBQyxvQkFBb0I7Z0JBRXhCLFNBQVM7c0JBQWpCLEtBQUs7Z0JBUU4sd0JBQXdCO3NCQUR2QixLQUFLO2dCQU9OLFFBQVE7c0JBRFAsS0FBSztnQkFJYyxRQUFRO3NCQUQzQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9zaXRpb25TdHJhdGVneSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBmb3J3YXJkUmVmLCBIb3N0QmluZGluZywgaW5qZWN0LCBJbnB1dCwgVGVtcGxhdGVSZWYsIFR5cGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IGdldEludGwgfSBmcm9tICdAbHVjY2EtZnJvbnQvbmcvY29yZSc7XG5pbXBvcnQgeyBBTHVTZWxlY3RJbnB1dENvbXBvbmVudCwgTHVPcHRpb25Db250ZXh0LCBwcm92aWRlTHVTZWxlY3RMYWJlbHNBbmRJZHMsIHByb3ZpZGVMdVNlbGVjdE92ZXJsYXlDb250YWluZXIsIMm1THVPcHRpb25PdXRsZXREaXJlY3RpdmUgfSBmcm9tICdAbHVjY2EtZnJvbnQvbmcvY29yZS1zZWxlY3QnO1xuaW1wb3J0IHsgTHVUb29sdGlwTW9kdWxlIH0gZnJvbSAnQGx1Y2NhLWZyb250L25nL3Rvb2x0aXAnO1xuaW1wb3J0IHsgUmVwbGF5U3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTHVNdWx0aVNlbGVjdERlZmF1bHREaXNwbGF5ZXJDb21wb25lbnQgfSBmcm9tICcuLi9kaXNwbGF5ZXIvaW5kZXgnO1xuaW1wb3J0IHsgTFVfTVVMVElfU0VMRUNUX1RSQU5TTEFUSU9OUyB9IGZyb20gJy4uL3NlbGVjdC50cmFuc2xhdGUnO1xuaW1wb3J0IHsgTHVNdWx0aVNlbGVjdFBhbmVsUmVmRmFjdG9yeSB9IGZyb20gJy4vcGFuZWwtcmVmLmZhY3RvcnknO1xuaW1wb3J0IHsgTHVNdWx0aVNlbGVjdFBhbmVsUmVmIH0gZnJvbSAnLi9wYW5lbC5tb2RlbCc7XG5pbXBvcnQgeyBJY29uQ29tcG9uZW50IH0gZnJvbSAnQGx1Y2NhLWZyb250L25nL2ljb24nO1xuXG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6ICdsdS1tdWx0aS1zZWxlY3QnLFxuXHRzdGFuZGFsb25lOiB0cnVlLFxuXHRpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBMdVRvb2x0aXBNb2R1bGUsIMm1THVPcHRpb25PdXRsZXREaXJlY3RpdmUsIEljb25Db21wb25lbnRdLFxuXHR0ZW1wbGF0ZVVybDogJy4vc2VsZWN0LWlucHV0LmNvbXBvbmVudC5odG1sJyxcblx0c3R5bGVVcmxzOiBbJy4vc2VsZWN0LWlucHV0LmNvbXBvbmVudC5zY3NzJ10sXG5cdGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuXHRwcm92aWRlcnM6IFtcblx0XHR7XG5cdFx0XHRwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcblx0XHRcdHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEx1TXVsdGlTZWxlY3RJbnB1dENvbXBvbmVudCksXG5cdFx0XHRtdWx0aTogdHJ1ZSxcblx0XHR9LFxuXHRcdHtcblx0XHRcdHByb3ZpZGU6IEFMdVNlbGVjdElucHV0Q29tcG9uZW50LFxuXHRcdFx0dXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTHVNdWx0aVNlbGVjdElucHV0Q29tcG9uZW50KSxcblx0XHR9LFxuXHRcdHByb3ZpZGVMdVNlbGVjdE92ZXJsYXlDb250YWluZXIoKSxcblx0XHRwcm92aWRlTHVTZWxlY3RMYWJlbHNBbmRJZHMoKSxcblx0XHRMdU11bHRpU2VsZWN0UGFuZWxSZWZGYWN0b3J5LFxuXHRdLFxufSlcbmV4cG9ydCBjbGFzcyBMdU11bHRpU2VsZWN0SW5wdXRDb21wb25lbnQ8VD4gZXh0ZW5kcyBBTHVTZWxlY3RJbnB1dENvbXBvbmVudDxULCBUW10+IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuXHRpbnRsID0gZ2V0SW50bChMVV9NVUxUSV9TRUxFQ1RfVFJBTlNMQVRJT05TKTtcblxuXHRASG9zdEJpbmRpbmcoJ2NsYXNzLm1vZC1tdWx0aXBsZScpIG1vZE11bHRpcGxlQ2xhc3MgPSB0cnVlO1xuXG5cdEBJbnB1dCgpIHZhbHVlc1RwbD86IFRlbXBsYXRlUmVmPEx1T3B0aW9uQ29udGV4dDxUW10+PiB8IFR5cGU8dW5rbm93bj4gPSBMdU11bHRpU2VsZWN0RGVmYXVsdERpc3BsYXllckNvbXBvbmVudDtcblxuXHQvLyBUT0RPIFRoaXMgaXMgZm9yIHNlbGVjdCBhbGxcblx0Ly8gQElucHV0KCkgc2V0IGFyZUFsbE9wdGlvbnNTZWxlY3RlZChzZWxlY3RlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuXHQvLyBcdHRoaXMuYXJlQWxsT3B0aW9uc1NlbGVjdGVkJC5uZXh0KHNlbGVjdGVkKTtcblx0Ly8gfVxuXG5cdEBJbnB1dCgpXG5cdGV4cGFuZGVkUG9zaXRpb25TdHJhdGVneT86IFBvc2l0aW9uU3RyYXRlZ3k7XG5cblx0Ly8gVE9ETyB0aGlzIGlzIGZvciBzZWxlY3QgYWxsXG5cdC8vIEBPdXRwdXQoKSBzZWxlY3RBbGwgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cblx0QElucHV0KClcblx0ZXhwYW5kZWQgPSBmYWxzZTtcblxuXHRASW5wdXQoKVxuXHRwdWJsaWMgb3ZlcnJpZGUgZ2V0IHBhbmVsUmVmKCk6IEx1TXVsdGlTZWxlY3RQYW5lbFJlZjxUPiB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHRoaXMuX3BhbmVsUmVmO1xuXHR9XG5cblx0cHJvdGVjdGVkIGFyZUFsbE9wdGlvbnNTZWxlY3RlZCQgPSBuZXcgUmVwbGF5U3ViamVjdDxib29sZWFuIHwgdW5kZWZpbmVkPigxKTtcblxuXHRwcm90ZWN0ZWQgb3ZlcnJpZGUgX3BhbmVsUmVmPzogTHVNdWx0aVNlbGVjdFBhbmVsUmVmPFQ+O1xuXG5cdHByb3RlY3RlZCBwYW5lbFJlZkZhY3RvcnkgPSBpbmplY3QoTHVNdWx0aVNlbGVjdFBhbmVsUmVmRmFjdG9yeSk7XG5cblx0cHVibGljIG92ZXJyaWRlIHdyaXRlVmFsdWUodmFsdWU6IFRbXSk6IHZvaWQge1xuXHRcdHN1cGVyLndyaXRlVmFsdWUodmFsdWUpO1xuXHRcdHRoaXMucGFuZWxSZWY/LnVwZGF0ZVNlbGVjdGVkT3B0aW9ucyh2YWx1ZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgb3ZlcnJpZGUgYnVpbGRQYW5lbFJlZigpOiBMdU11bHRpU2VsZWN0UGFuZWxSZWY8VD4ge1xuXHRcdHJldHVybiB0aGlzLnBhbmVsUmVmRmFjdG9yeS5idWlsZFBhbmVsUmVmKFxuXHRcdFx0e1xuXHRcdFx0XHRpbml0aWFsVmFsdWU6IHRoaXMudmFsdWUsXG5cdFx0XHRcdG9wdGlvbkNvbXBhcmVyOiB0aGlzLm9wdGlvbkNvbXBhcmVyLFxuXHRcdFx0XHRvcHRpb25zJDogdGhpcy5vcHRpb25zJCxcblx0XHRcdFx0bG9hZGluZyQ6IHRoaXMubG9hZGluZyQsXG5cdFx0XHRcdHNlYXJjaGFibGU6IHRoaXMuc2VhcmNoYWJsZSxcblx0XHRcdFx0b3B0aW9uVHBsOiB0aGlzLm9wdGlvblRwbCxcblx0XHRcdFx0Y2FuU2VsZWN0QWxsOiBmYWxzZSwgLy8gVE9ETyBDb25uZWN0IHRoaXMgdG8gdGhpcy5zZWxlY3RBbGwub2JzZXJ2ZWQgd2hlbiB3ZSdsbCBiZSBmaXhlZCBvbiBob3cgdG8gaW1wbGVtZW50IHNlbGVjdCBhbGxcblx0XHRcdFx0YXJlQWxsT3B0aW9uc1NlbGVjdGVkJDogdGhpcy5hcmVBbGxPcHRpb25zU2VsZWN0ZWQkLFxuXHRcdFx0XHRleHBhbmRlZDogdGhpcy5leHBhbmRlZCxcblx0XHRcdH0sXG5cdFx0XHR0aGlzLm92ZXJsYXlDb25maWcsXG5cdFx0XHR0aGlzLmV4cGFuZGVkUG9zaXRpb25TdHJhdGVneSxcblx0XHQpO1xuXHR9XG5cblx0cHJvdGVjdGVkIG92ZXJyaWRlIGJpbmRJbnB1dFRvUGFuZWxSZWZFdmVudHMoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnBhbmVsUmVmKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0c3VwZXIuYmluZElucHV0VG9QYW5lbFJlZkV2ZW50cygpO1xuXHRcdC8vIFRPRE8gVGhpcyBpcyBmb3Igc2VsZWN0IGFsbFxuXHRcdC8vIHRoaXMucGFuZWxSZWYuc2VsZWN0QWxsLnN1YnNjcmliZSgoKSA9PiB0aGlzLnNlbGVjdEFsbC5lbWl0KCkpO1xuXHR9XG5cblx0cHJvdGVjdGVkIG92ZXJyaWRlIGdldCBoYXNWYWx1ZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLmxlbmd0aCA+IDA7XG5cdH1cblxuXHRvdmVycmlkZSBjbGVhclZhbHVlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0dGhpcy5vbkNoYW5nZT8uKFtdKTtcblx0XHR0aGlzLnZhbHVlID0gW107XG5cdH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJsdS1zZWxlY3QtcGxhY2Vob2xkZXJcIj57eyBwbGFjZWhvbGRlciB9fTwvZGl2PlxuPGRpdiBjbGFzcz1cImx1LXNlbGVjdC12YWx1ZVwiPlxuXHQ8ZGl2IGNsYXNzPVwibHUtc2VsZWN0LWRpc3BsYXktd3JhcHBlclwiPlxuXHRcdDxuZy1jb250YWluZXIgKmx1T3B0aW9uT3V0bGV0PVwidmFsdWVzVHBsOyB2YWx1ZTogdmFsdWVcIj48L25nLWNvbnRhaW5lcj5cblx0PC9kaXY+XG48L2Rpdj5cbjxkaXYgY2xhc3M9XCJsdS1zZWxlY3Qtc3VmZml4XCI+XG5cdDxhICpuZ0lmPVwiaGFzVmFsdWUgJiYgY2xlYXJhYmxlXCIgcm9sZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xlYXJcIiAoY2xpY2spPVwiY2xlYXJWYWx1ZSgkZXZlbnQpXCI+XG5cdFx0PHNwYW4gY2xhc3M9XCJ1LW1hc2tcIj57e2ludGwuY2xlYXJ9fTwvc3Bhbj5cblx0PC9hPlxuPC9kaXY+XG4iXX0=