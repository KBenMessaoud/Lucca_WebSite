import { Directive, EventEmitter, HostBinding, HostListener, Input, Output } from '@angular/core';
import { ALuPopoverTrigger, LuPopoverTarget } from '@lucca-front/ng/popover';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/overlay";
/**
 * This directive is intended to be used in conjunction with an lu-dropdown tag.  It is
 * responsible for toggling the display of the provided dropdown instance.
 */
class LuDropdownTriggerDirective extends ALuPopoverTrigger {
    /** References the popover instance that the trigger is associated with. */
    set inputPanel(p) {
        this.panel = p;
    }
    /** how you want to position the panel relative to the target, allowed values: above, below, before, after */
    set inputPosition(pos) {
        this.target.position = pos;
    }
    /** how the panel will be align with the target, allowed values: top, bottom, left, right */
    set inputAlignment(al) {
        this.target.alignment = al;
    }
    /** disable popover apparition */
    set inputDisabled(d) {
        this.disabled = d;
    }
    /** set to true if you want the panel to appear on top of the target */
    set inputOverlap(ov) {
        this.target.overlap = ov;
    }
    /** accessibility attribute - dont override */
    get _attrAriaExpanded() {
        return this._popoverOpen;
    }
    /** accessibility attribute - dont override */
    get _attrId() {
        return this._triggerId;
    }
    /** accessibility attribute - dont override */
    get _attrAriaControls() {
        return this._panelId;
    }
    constructor(_overlay, _elementRef, _viewContainerRef) {
        super(_overlay, _elementRef, _viewContainerRef);
        this._overlay = _overlay;
        this._elementRef = _elementRef;
        this._viewContainerRef = _viewContainerRef;
        /** Event emitted when the associated popover is opened. */
        this.onOpen = new EventEmitter();
        /** Event emitted when the associated popover is closed. */
        this.onClose = new EventEmitter();
        this.target = new LuPopoverTarget();
        this.target.elementRef = this._elementRef;
        this._triggerId = this._elementRef.nativeElement.getAttribute('id') || this._triggerId;
        this.triggerEvent = 'click';
        this.target.position = 'below';
        this.target.alignment = 'right';
    }
    onClick() {
        super.onClick();
    }
    ngAfterViewInit() {
        this._checkPanel();
        this._checkTarget();
    }
    ngOnDestroy() {
        this._cleanUpSubscriptions();
        if (this._popoverOpen) {
            this.closePopover();
        }
        this.destroyPopover();
    }
    _emitOpen() {
        this.onOpen.emit();
    }
    _emitClose() {
        this.onClose.emit();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.3", ngImport: i0, type: LuDropdownTriggerDirective, deps: [{ token: i1.Overlay }, { token: i0.ElementRef }, { token: i0.ViewContainerRef }], target: i0.ɵɵFactoryTarget.Directive }); }
    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "16.1.3", type: LuDropdownTriggerDirective, selector: "[luDropdown]", inputs: { inputPanel: ["luDropdown", "inputPanel"], inputPosition: ["luDropdownPosition", "inputPosition"], inputAlignment: ["luDropdownAlignment", "inputAlignment"], inputDisabled: ["luDropdownDisabled", "inputDisabled"], inputOverlap: ["luDropdownOverlap", "inputOverlap"] }, outputs: { onOpen: "luDropdownOnOpen", onClose: "luDropdownOnClose" }, host: { listeners: { "click": "onClick()" }, properties: { "attr.aria-expanded": "this._attrAriaExpanded", "attr.id": "this._attrId", "attr.aria-controls": "this._attrAriaControls" } }, exportAs: ["LuDropdownTrigger"], usesInheritance: true, ngImport: i0 }); }
}
export { LuDropdownTriggerDirective };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.3", ngImport: i0, type: LuDropdownTriggerDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[luDropdown]',
                    exportAs: 'LuDropdownTrigger',
                }]
        }], ctorParameters: function () { return [{ type: i1.Overlay }, { type: i0.ElementRef }, { type: i0.ViewContainerRef }]; }, propDecorators: { inputPanel: [{
                type: Input,
                args: ['luDropdown']
            }], inputPosition: [{
                type: Input,
                args: ['luDropdownPosition']
            }], inputAlignment: [{
                type: Input,
                args: ['luDropdownAlignment']
            }], inputDisabled: [{
                type: Input,
                args: ['luDropdownDisabled']
            }], inputOverlap: [{
                type: Input,
                args: ['luDropdownOverlap']
            }], onOpen: [{
                type: Output,
                args: ['luDropdownOnOpen']
            }], onClose: [{
                type: Output,
                args: ['luDropdownOnClose']
            }], _attrAriaExpanded: [{
                type: HostBinding,
                args: ['attr.aria-expanded']
            }], _attrId: [{
                type: HostBinding,
                args: ['attr.id']
            }], _attrAriaControls: [{
                type: HostBinding,
                args: ['attr.aria-controls']
            }], onClick: [{
                type: HostListener,
                args: ['click']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcGRvd24tdHJpZ2dlci5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9uZy9kcm9wZG93bi90cmlnZ2VyL2Ryb3Bkb3duLXRyaWdnZXIuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBaUIsU0FBUyxFQUFjLFlBQVksRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBYSxNQUFNLEVBQW9CLE1BQU0sZUFBZSxDQUFDO0FBQzFKLE9BQU8sRUFBRSxpQkFBaUIsRUFBOEUsZUFBZSxFQUFFLE1BQU0seUJBQXlCLENBQUM7OztBQUd6Sjs7O0dBR0c7QUFDSCxNQUlhLDBCQUNaLFNBQVEsaUJBQTJDO0lBR25ELDJFQUEyRTtJQUMzRSxJQUF5QixVQUFVLENBQUMsQ0FBUztRQUM1QyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNoQixDQUFDO0lBRUQsNkdBQTZHO0lBQzdHLElBQWlDLGFBQWEsQ0FBQyxHQUFzQjtRQUNwRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUM7SUFDNUIsQ0FBQztJQUNELDRGQUE0RjtJQUM1RixJQUFrQyxjQUFjLENBQUMsRUFBc0I7UUFDdEUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFDRCxpQ0FBaUM7SUFDakMsSUFBaUMsYUFBYSxDQUFDLENBQVU7UUFDeEQsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7SUFDbkIsQ0FBQztJQUNELHVFQUF1RTtJQUN2RSxJQUFnQyxZQUFZLENBQUMsRUFBVztRQUN2RCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQU9ELDhDQUE4QztJQUM5QyxJQUF1QyxpQkFBaUI7UUFDdkQsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzFCLENBQUM7SUFDRCw4Q0FBOEM7SUFDOUMsSUFBNEIsT0FBTztRQUNsQyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDeEIsQ0FBQztJQUNELDhDQUE4QztJQUM5QyxJQUF1QyxpQkFBaUI7UUFDdkQsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxZQUErQixRQUFpQixFQUFxQixXQUFvQyxFQUFxQixpQkFBbUM7UUFDaEssS0FBSyxDQUFDLFFBQVEsRUFBRSxXQUFXLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQURsQixhQUFRLEdBQVIsUUFBUSxDQUFTO1FBQXFCLGdCQUFXLEdBQVgsV0FBVyxDQUF5QjtRQUFxQixzQkFBaUIsR0FBakIsaUJBQWlCLENBQWtCO1FBbEJqSywyREFBMkQ7UUFDL0IsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFDOUQsMkRBQTJEO1FBQzlCLFlBQU8sR0FBRyxJQUFJLFlBQVksRUFBUSxDQUFDO1FBaUIvRCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksZUFBZSxFQUFFLENBQUM7UUFDcEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUMxQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQ3ZGLElBQUksQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDO1FBQzVCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUMvQixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUM7SUFDakMsQ0FBQztJQUdRLE9BQU87UUFDZixLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUNELGVBQWU7UUFDZCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3JCLENBQUM7SUFDRCxXQUFXO1FBQ1YsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDN0IsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztTQUNwQjtRQUNELElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBQ1MsU0FBUztRQUNsQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFDUyxVQUFVO1FBQ25CLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDckIsQ0FBQzs4R0ExRVcsMEJBQTBCO2tHQUExQiwwQkFBMEI7O1NBQTFCLDBCQUEwQjsyRkFBMUIsMEJBQTBCO2tCQUp0QyxTQUFTO21CQUFDO29CQUNWLFFBQVEsRUFBRSxjQUFjO29CQUN4QixRQUFRLEVBQUUsbUJBQW1CO2lCQUM3QjtzSkFNeUIsVUFBVTtzQkFBbEMsS0FBSzt1QkFBQyxZQUFZO2dCQUtjLGFBQWE7c0JBQTdDLEtBQUs7dUJBQUMsb0JBQW9CO2dCQUlPLGNBQWM7c0JBQS9DLEtBQUs7dUJBQUMscUJBQXFCO2dCQUlLLGFBQWE7c0JBQTdDLEtBQUs7dUJBQUMsb0JBQW9CO2dCQUlLLFlBQVk7c0JBQTNDLEtBQUs7dUJBQUMsbUJBQW1CO2dCQUtFLE1BQU07c0JBQWpDLE1BQU07dUJBQUMsa0JBQWtCO2dCQUVHLE9BQU87c0JBQW5DLE1BQU07dUJBQUMsbUJBQW1CO2dCQUdZLGlCQUFpQjtzQkFBdkQsV0FBVzt1QkFBQyxvQkFBb0I7Z0JBSUwsT0FBTztzQkFBbEMsV0FBVzt1QkFBQyxTQUFTO2dCQUlpQixpQkFBaUI7c0JBQXZELFdBQVc7dUJBQUMsb0JBQW9CO2dCQWV4QixPQUFPO3NCQURmLFlBQVk7dUJBQUMsT0FBTyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtb24tcHJlZml4ICovXG5pbXBvcnQgeyBPdmVybGF5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL292ZXJsYXknO1xuaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RCaW5kaW5nLCBIb3N0TGlzdGVuZXIsIElucHV0LCBPbkRlc3Ryb3ksIE91dHB1dCwgVmlld0NvbnRhaW5lclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQUx1UG9wb3ZlclRyaWdnZXIsIElMdVBvcG92ZXJUYXJnZXQsIElMdVBvcG92ZXJUcmlnZ2VyLCBMdVBvcG92ZXJBbGlnbm1lbnQsIEx1UG9wb3ZlclBvc2l0aW9uLCBMdVBvcG92ZXJUYXJnZXQgfSBmcm9tICdAbHVjY2EtZnJvbnQvbmcvcG9wb3Zlcic7XG5pbXBvcnQgeyBJTHVEcm9wZG93blBhbmVsIH0gZnJvbSAnLi4vcGFuZWwvaW5kZXgnO1xuXG4vKipcbiAqIFRoaXMgZGlyZWN0aXZlIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBhbiBsdS1kcm9wZG93biB0YWcuICBJdCBpc1xuICogcmVzcG9uc2libGUgZm9yIHRvZ2dsaW5nIHRoZSBkaXNwbGF5IG9mIHRoZSBwcm92aWRlZCBkcm9wZG93biBpbnN0YW5jZS5cbiAqL1xuQERpcmVjdGl2ZSh7XG5cdHNlbGVjdG9yOiAnW2x1RHJvcGRvd25dJyxcblx0ZXhwb3J0QXM6ICdMdURyb3Bkb3duVHJpZ2dlcicsXG59KVxuZXhwb3J0IGNsYXNzIEx1RHJvcGRvd25UcmlnZ2VyRGlyZWN0aXZlPFRQYW5lbCBleHRlbmRzIElMdURyb3Bkb3duUGFuZWwgPSBJTHVEcm9wZG93blBhbmVsPlxuXHRleHRlbmRzIEFMdVBvcG92ZXJUcmlnZ2VyPFRQYW5lbCwgSUx1UG9wb3ZlclRhcmdldD5cblx0aW1wbGVtZW50cyBJTHVQb3BvdmVyVHJpZ2dlcjxUUGFuZWwsIElMdVBvcG92ZXJUYXJnZXQ+LCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3lcbntcblx0LyoqIFJlZmVyZW5jZXMgdGhlIHBvcG92ZXIgaW5zdGFuY2UgdGhhdCB0aGUgdHJpZ2dlciBpcyBhc3NvY2lhdGVkIHdpdGguICovXG5cdEBJbnB1dCgnbHVEcm9wZG93bicpIHNldCBpbnB1dFBhbmVsKHA6IFRQYW5lbCkge1xuXHRcdHRoaXMucGFuZWwgPSBwO1xuXHR9XG5cblx0LyoqIGhvdyB5b3Ugd2FudCB0byBwb3NpdGlvbiB0aGUgcGFuZWwgcmVsYXRpdmUgdG8gdGhlIHRhcmdldCwgYWxsb3dlZCB2YWx1ZXM6IGFib3ZlLCBiZWxvdywgYmVmb3JlLCBhZnRlciAqL1xuXHRASW5wdXQoJ2x1RHJvcGRvd25Qb3NpdGlvbicpIHNldCBpbnB1dFBvc2l0aW9uKHBvczogTHVQb3BvdmVyUG9zaXRpb24pIHtcblx0XHR0aGlzLnRhcmdldC5wb3NpdGlvbiA9IHBvcztcblx0fVxuXHQvKiogaG93IHRoZSBwYW5lbCB3aWxsIGJlIGFsaWduIHdpdGggdGhlIHRhcmdldCwgYWxsb3dlZCB2YWx1ZXM6IHRvcCwgYm90dG9tLCBsZWZ0LCByaWdodCAqL1xuXHRASW5wdXQoJ2x1RHJvcGRvd25BbGlnbm1lbnQnKSBzZXQgaW5wdXRBbGlnbm1lbnQoYWw6IEx1UG9wb3ZlckFsaWdubWVudCkge1xuXHRcdHRoaXMudGFyZ2V0LmFsaWdubWVudCA9IGFsO1xuXHR9XG5cdC8qKiBkaXNhYmxlIHBvcG92ZXIgYXBwYXJpdGlvbiAqL1xuXHRASW5wdXQoJ2x1RHJvcGRvd25EaXNhYmxlZCcpIHNldCBpbnB1dERpc2FibGVkKGQ6IGJvb2xlYW4pIHtcblx0XHR0aGlzLmRpc2FibGVkID0gZDtcblx0fVxuXHQvKiogc2V0IHRvIHRydWUgaWYgeW91IHdhbnQgdGhlIHBhbmVsIHRvIGFwcGVhciBvbiB0b3Agb2YgdGhlIHRhcmdldCAqL1xuXHRASW5wdXQoJ2x1RHJvcGRvd25PdmVybGFwJykgc2V0IGlucHV0T3ZlcmxhcChvdjogYm9vbGVhbikge1xuXHRcdHRoaXMudGFyZ2V0Lm92ZXJsYXAgPSBvdjtcblx0fVxuXG5cdC8qKiBFdmVudCBlbWl0dGVkIHdoZW4gdGhlIGFzc29jaWF0ZWQgcG9wb3ZlciBpcyBvcGVuZWQuICovXG5cdEBPdXRwdXQoJ2x1RHJvcGRvd25Pbk9wZW4nKSBvbk9wZW4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cdC8qKiBFdmVudCBlbWl0dGVkIHdoZW4gdGhlIGFzc29jaWF0ZWQgcG9wb3ZlciBpcyBjbG9zZWQuICovXG5cdEBPdXRwdXQoJ2x1RHJvcGRvd25PbkNsb3NlJykgb25DbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuXHQvKiogYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGUgLSBkb250IG92ZXJyaWRlICovXG5cdEBIb3N0QmluZGluZygnYXR0ci5hcmlhLWV4cGFuZGVkJykgZ2V0IF9hdHRyQXJpYUV4cGFuZGVkKCkge1xuXHRcdHJldHVybiB0aGlzLl9wb3BvdmVyT3Blbjtcblx0fVxuXHQvKiogYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGUgLSBkb250IG92ZXJyaWRlICovXG5cdEBIb3N0QmluZGluZygnYXR0ci5pZCcpIGdldCBfYXR0cklkKCkge1xuXHRcdHJldHVybiB0aGlzLl90cmlnZ2VySWQ7XG5cdH1cblx0LyoqIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlIC0gZG9udCBvdmVycmlkZSAqL1xuXHRASG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1jb250cm9scycpIGdldCBfYXR0ckFyaWFDb250cm9scygpIHtcblx0XHRyZXR1cm4gdGhpcy5fcGFuZWxJZDtcblx0fVxuXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCBvdmVycmlkZSBfb3ZlcmxheTogT3ZlcmxheSwgcHJvdGVjdGVkIG92ZXJyaWRlIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PiwgcHJvdGVjdGVkIG92ZXJyaWRlIF92aWV3Q29udGFpbmVyUmVmOiBWaWV3Q29udGFpbmVyUmVmKSB7XG5cdFx0c3VwZXIoX292ZXJsYXksIF9lbGVtZW50UmVmLCBfdmlld0NvbnRhaW5lclJlZik7XG5cdFx0dGhpcy50YXJnZXQgPSBuZXcgTHVQb3BvdmVyVGFyZ2V0KCk7XG5cdFx0dGhpcy50YXJnZXQuZWxlbWVudFJlZiA9IHRoaXMuX2VsZW1lbnRSZWY7XG5cdFx0dGhpcy5fdHJpZ2dlcklkID0gdGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSB8fCB0aGlzLl90cmlnZ2VySWQ7XG5cdFx0dGhpcy50cmlnZ2VyRXZlbnQgPSAnY2xpY2snO1xuXHRcdHRoaXMudGFyZ2V0LnBvc2l0aW9uID0gJ2JlbG93Jztcblx0XHR0aGlzLnRhcmdldC5hbGlnbm1lbnQgPSAncmlnaHQnO1xuXHR9XG5cblx0QEhvc3RMaXN0ZW5lcignY2xpY2snKVxuXHRvdmVycmlkZSBvbkNsaWNrKCkge1xuXHRcdHN1cGVyLm9uQ2xpY2soKTtcblx0fVxuXHRuZ0FmdGVyVmlld0luaXQoKSB7XG5cdFx0dGhpcy5fY2hlY2tQYW5lbCgpO1xuXHRcdHRoaXMuX2NoZWNrVGFyZ2V0KCk7XG5cdH1cblx0bmdPbkRlc3Ryb3koKSB7XG5cdFx0dGhpcy5fY2xlYW5VcFN1YnNjcmlwdGlvbnMoKTtcblx0XHRpZiAodGhpcy5fcG9wb3Zlck9wZW4pIHtcblx0XHRcdHRoaXMuY2xvc2VQb3BvdmVyKCk7XG5cdFx0fVxuXHRcdHRoaXMuZGVzdHJveVBvcG92ZXIoKTtcblx0fVxuXHRwcm90ZWN0ZWQgX2VtaXRPcGVuKCk6IHZvaWQge1xuXHRcdHRoaXMub25PcGVuLmVtaXQoKTtcblx0fVxuXHRwcm90ZWN0ZWQgX2VtaXRDbG9zZSgpOiB2b2lkIHtcblx0XHR0aGlzLm9uQ2xvc2UuZW1pdCgpO1xuXHR9XG59XG4iXX0=